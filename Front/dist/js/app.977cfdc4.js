(function(t){function e(e){for(var a,n,c=e[0],r=e[1],l=e[2],d=0,p=[];d<c.length;d++)n=c[d],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&p.push(i[n][0]),i[n]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);u&&u(e);while(p.length)p.shift()();return o.push.apply(o,l||[]),s()}function s(){for(var t,e=0;e<o.length;e++){for(var s=o[e],a=!0,c=1;c<s.length;c++){var r=s[c];0!==i[r]&&(a=!1)}a&&(o.splice(e--,1),t=n(n.s=s[0]))}return t}var a={},i={app:0},o=[];function n(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=a,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(s,a,function(e){return t[e]}.bind(null,a));return s},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],r=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=r;o.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"0980":function(t,e,s){"use strict";s("b97f")},"110f":function(t,e,s){},1531:function(t,e,s){},"1bb1":function(t,e,s){"use strict";s("86e1")},"22a7":function(t,e,s){"use strict";s("66a8")},2469:function(t,e,s){"use strict";s("278a")},"278a":function(t,e,s){},"2ac8":function(t,e,s){"use strict";s("49a0")},"2b82":function(t,e,s){},"2f5a":function(t,e,s){},3166:function(t,e,s){"use strict";s("fc4e")},"32ee":function(t,e,s){},3324:function(t,e,s){"use strict";s("2b82")},3506:function(t,e,s){"use strict";s("6a89")},"484c":function(t,e,s){"use strict";s("4e06")},"49a0":function(t,e,s){},"4e06":function(t,e,s){},"53f7":function(t,e,s){},5545:function(t,e,s){"use strict";s("2f5a")},"56d7":function(t,e,s){"use strict";s.r(e),s.d(e,"settings",(function(){return da}));var a=s("7a23");const i={class:"app-container"};function o(t,e,s,o,n,c){const r=Object(a["A"])("Header"),l=Object(a["A"])("router-view"),u=Object(a["A"])("LoginPopup"),d=Object(a["A"])("Footer");return Object(a["t"])(),Object(a["f"])("div",i,[Object(a["j"])(r),Object(a["j"])(l),this.$store.state.showLoginPopup?(Object(a["t"])(),Object(a["d"])(u,{key:0})):Object(a["e"])("",!0),Object(a["j"])(d,{class:"footer"})])}const n=t=>(Object(a["w"])("data-v-ef6652c4"),t=t(),Object(a["u"])(),t),c={class:"header"},r=["src"],l=n(()=>Object(a["g"])("div",{class:"logo__name"},"Маршрутка",-1)),u=Object(a["h"])('<datalist id="region" data-v-ef6652c4><option value="Абхазия" data-v-ef6652c4>Abkhazia</option><option value="Сочи" data-v-ef6652c4>Sochi</option><option value="Красная Поляна" data-v-ef6652c4>Krasnaia Polyana</option><option value="Все" data-v-ef6652c4>All</option></datalist>',1),d={class:"user-menu"},p={key:0,class:"user-menu__arrow"},b={key:1,class:"user-menu__dropdown-content"},g=Object(a["i"])("Мой маршрут"),j=Object(a["i"])("Избранное"),m=Object(a["i"])("Настройки"),O=Object(a["i"])("Добавить место");function h(t,e,s,i,o,n){const h=Object(a["A"])("router-link"),v=Object(a["A"])("MyButton"),f=Object(a["A"])("Avatar");return Object(a["t"])(),Object(a["f"])("div",c,[Object(a["j"])(h,{to:"/",class:"logo"},{default:Object(a["I"])(()=>[Object(a["g"])("img",{class:"logo__icon",src:t.$baseUrl+"/icons/logo.svg",alt:"Маршрутка"},null,8,r),l]),_:1}),n.isStartPage||n.isDesktop?(Object(a["t"])(),Object(a["f"])("div",{key:0,class:Object(a["p"])(["search-form",{"search-form-mobile":!n.isDesktop}])},[Object(a["J"])(Object(a["g"])("input",{class:"search-form__input-text",type:"text",list:"region",placeholder:"Куда вы собираетесь?","onUpdate:modelValue":e[0]||(e[0]=e=>t.selectedRegion=e)},null,512),[[a["G"],t.selectedRegion]]),u,Object(a["j"])(v,{title:"Поиск",noLeftRadius:!0,onClick:n.setselectedRegion},null,8,["onClick"])],2)):Object(a["e"])("",!0),Object(a["g"])("div",d,[Object(a["j"])(f,{userName:n.userInfo.name,userImg:n.userInfo.avatar,hideName:!n.isDesktop},null,8,["userName","userImg","hideName"]),n.isLogIn?Object(a["e"])("",!0):(Object(a["t"])(),Object(a["f"])("div",p)),n.isLogIn?Object(a["e"])("",!0):(Object(a["t"])(),Object(a["f"])("div",b,[Object(a["j"])(h,{to:"/myroute",class:"dropdown-content__link"},{default:Object(a["I"])(()=>[g]),_:1}),Object(a["j"])(h,{to:"/myfavorites",class:"dropdown-content__link"},{default:Object(a["I"])(()=>[j]),_:1}),Object(a["j"])(h,{to:"/settings",class:"dropdown-content__link"},{default:Object(a["I"])(()=>[m]),_:1}),n.isAdmin?(Object(a["t"])(),Object(a["d"])(h,{key:0,to:"/admin",class:"dropdown-content__link"},{default:Object(a["I"])(()=>[O]),_:1})):Object(a["e"])("",!0),Object(a["g"])("div",{class:"dropdown-content__link",onClick:e[1]||(e[1]=(...t)=>n.setLoginPopup&&n.setLoginPopup(...t))},"Выйти")])),n.isLogIn?(Object(a["t"])(),Object(a["f"])("div",{key:2,class:"login-panel__button-login",onClick:e[2]||(e[2]=(...t)=>n.setLoginPopup&&n.setLoginPopup(...t))},"Войти")):Object(a["e"])("",!0)])])}const v=t=>(Object(a["w"])("data-v-8029825e"),t=t(),Object(a["u"])(),t),f=v(()=>Object(a["g"])("div",{class:"welcome-image__text"},"Создай свой маршрут",-1)),w={class:"places-container"},y={class:"menu__filters"},_=Object(a["i"])("Категория: "),P=Object(a["h"])('<option value="all" selected data-v-8029825e>Все</option><option value="waterfall" data-v-8029825e>Водопады</option><option value="lake" data-v-8029825e>Озера</option><option value="mountain" data-v-8029825e>Горы</option><option value="abonded" data-v-8029825e>Заброшки</option>',5),k=[P],I={class:"gallery"};function R(t,e,s,i,o,n){const c=Object(a["A"])("PlacePreview");return Object(a["t"])(),Object(a["f"])("div",null,[f,Object(a["g"])("div",w,[Object(a["g"])("div",y,[Object(a["g"])("div",null,"Регион: "+Object(a["C"])(n.selectedRegion),1),Object(a["g"])("div",null,[_,Object(a["J"])(Object(a["g"])("select",{class:"places-filter",name:"filter","onUpdate:modelValue":e[0]||(e[0]=t=>o.Pfilter=t)},k,512),[[a["F"],o.Pfilter]])])]),Object(a["g"])("div",I,[(Object(a["t"])(!0),Object(a["f"])(a["a"],null,Object(a["z"])(n.filteredPlaces,t=>(Object(a["t"])(),Object(a["d"])(c,{key:"place + "+t.id,routePoint:t,ShowText:!0},null,8,["routePoint"]))),128))])])])}const $={class:"gallery__item-container"},C=["src"],A={key:0,class:"item__name"};function x(t,e,s,i,o,n){const c=Object(a["A"])("router-link");return Object(a["t"])(),Object(a["d"])(c,{to:{name:"Description",params:{eng:this.routePoint.eng}},class:"gallery__item"},{default:Object(a["I"])(()=>[Object(a["g"])("div",$,[Object(a["g"])("img",{class:"item__image",src:t.$baseUrl+"/img/"+s.routePoint.eng+".jpeg",alt:"avt"},null,8,C),s.ShowText?(Object(a["t"])(),Object(a["f"])("div",A,Object(a["C"])(s.routePoint.name),1)):Object(a["e"])("",!0)])]),_:1},8,["to"])}var T={name:"PlacePreview",props:["routePoint","ShowText"]},D=(s("abfa"),s("6b0d")),V=s.n(D);const U=V()(T,[["render",x],["__scopeId","data-v-a7b7d32a"]]);var L=U,S={components:{PlacePreview:L},data(){return{Pfilter:"all"}},computed:{filteredPlaces(){return"Все"===this.selectedRegion&&"all"===this.Pfilter?this.places:"Все"===this.selectedRegion?this.places.filter(t=>t.tag===this.Pfilter):"all"===this.Pfilter?this.places.filter(t=>t.region===this.selectedRegion):this.places.filter(t=>t.tag===this.Pfilter&&t.region===this.selectedRegion)},selectedRegion(){return this.$store.state.selectedRegion},places(){return this.$store.state.places},isDesktop(){return this.$store.state.isDesktop}},created(){this.$store.dispatch("getPlaces")}};s("2469");const G=V()(S,[["render",R],["__scopeId","data-v-8029825e"]]);var M=G;const F={class:"description-text"},z={class:"input-rewiew"},B={class:"rewiew-rating"},E=Object(a["i"])("Ваша оценка: "),H=["src","onClick"];function J(t,e,s,i,o,n){const c=Object(a["A"])("Gallery"),r=Object(a["A"])("SavePanel"),l=Object(a["A"])("MyButton"),u=Object(a["A"])("ReviewMessages");return n.currentPlace?(Object(a["t"])(),Object(a["f"])("div",{key:0,class:Object(a["p"])(["description-page",{"description-page-mobile":!n.isDesktop}])},[Object(a["j"])(c,{images:n.currentPictures,vertical:!n.isDesktop},null,8,["images","vertical"]),Object(a["j"])(r),Object(a["g"])("div",F,Object(a["C"])(n.currentPlace.description),1),Object(a["g"])("div",z,[Object(a["J"])(Object(a["g"])("textarea",{class:"input-rewiew__input",type:"text",placeholder:"Введите отзыв","onUpdate:modelValue":e[0]||(e[0]=t=>o.inputValue=t),onKeydown:e[1]||(e[1]=Object(a["K"])(Object(a["L"])((...t)=>n.saveRewiew&&n.saveRewiew(...t),["ctrl"]),["enter"]))},null,544),[[a["G"],o.inputValue]]),Object(a["j"])(l,{title:"Отправить отзыв",noLeftRadius:!0,onClick:n.saveRewiew},null,8,["onClick"])]),Object(a["g"])("div",B,[E,(Object(a["t"])(),Object(a["f"])(a["a"],null,Object(a["z"])(5,e=>Object(a["g"])("img",{key:"star"+e,src:t.$baseUrl+"/icons/star.png",alt:"star",class:Object(a["p"])(["icon-star",{"icon-star--hovered":e<=o.starHovered}]),onClick:t=>n.onStarHover(e)},null,10,H)),64))]),Object(a["j"])(u,{reviews:n.currentReviews,horizontal:!n.isDesktop},null,8,["reviews","horizontal"])],2)):Object(a["e"])("",!0)}s("13d5");const N=["disabled"];function K(t,e,s,i,o,n){return Object(a["t"])(),Object(a["f"])("button",{class:Object(a["p"])(["button",{button_disabled:s.isDisabled,"button_no-left-radius":s.noLeftRadius,button_red:s.isRed}]),disabled:s.isDisabled},Object(a["C"])(s.title),11,N)}var W={name:"MyButton",props:["title","isDisabled","noLeftRadius","isRed"]};s("3324");const q=V()(W,[["render",K],["__scopeId","data-v-547637b4"]]);var Q=q;const X={class:"rewiew-messages"},Y=["src"];function Z(t,e,s,i,o,n){const c=Object(a["A"])("Title"),r=Object(a["A"])("Avatar");return Object(a["t"])(),Object(a["f"])(a["a"],null,[Object(a["j"])(c,{text:"Отзывы: "+s.reviews.length},null,8,["text"]),Object(a["g"])("div",X,[(Object(a["t"])(!0),Object(a["f"])(a["a"],null,Object(a["z"])(s.reviews,e=>(Object(a["t"])(),Object(a["f"])("div",{class:"rewiew-message",key:e},[Object(a["j"])(r,{userName:e.name,userImg:e.avatar},null,8,["userName","userImg"]),Object(a["g"])("div",{class:Object(a["p"])(["review-date",{"review-date-horizontal":s.horizontal}])},[Object(a["i"])(Object(a["C"])(e.createdAt)+" ",1),Object(a["g"])("div",null,[(Object(a["t"])(!0),Object(a["f"])(a["a"],null,Object(a["z"])(e.raiting,e=>(Object(a["t"])(),Object(a["f"])("img",{key:"star"+e,src:t.$baseUrl+"/icons/star.png",alt:"star",class:"icon-star"},null,8,Y))),128))])],2),Object(a["g"])("div",{class:Object(a["p"])(["rewiew-text",{"rewiew-text-horizontal":s.horizontal}])},Object(a["C"])(e.text),3)]))),128))])],64)}const tt=["src"],et={key:0,class:"avatar__name"};function st(t,e,s,i,o,n){return s.userImg?(Object(a["t"])(),Object(a["f"])("div",{key:0,class:Object(a["p"])({avatar:!s.hideName,"avatar-vertical":s.vertical})},[Object(a["g"])("img",{class:Object(a["p"])(["avatar__image",{"avatar__image-big":s.big}]),src:t.$baseUrl+"/avatars/"+s.userImg,alt:"avt"},null,10,tt),s.hideName?Object(a["e"])("",!0):(Object(a["t"])(),Object(a["f"])("div",et,Object(a["C"])(s.userName),1))],2)):Object(a["e"])("",!0)}var at={name:"Avatar",props:["userName","userImg","hideName","vertical","big"]};s("9481");const it=V()(at,[["render",st],["__scopeId","data-v-75e8ec86"]]);var ot=it;const nt={class:"title"};function ct(t,e,s,i,o,n){return Object(a["t"])(),Object(a["f"])("div",nt,Object(a["C"])(s.text),1)}var rt={name:"MyTitle",props:["text"]};s("3506");const lt=V()(rt,[["render",ct],["__scopeId","data-v-223edf24"]]);var ut=lt,dt={name:"ReviewMessages",props:["reviews","horizontal"],components:{Avatar:ot,Title:ut}};s("5545");const pt=V()(dt,[["render",Z],["__scopeId","data-v-7821ad4c"]]);var bt=pt;const gt=t=>(Object(a["w"])("data-v-deaecaa8"),t=t(),Object(a["u"])(),t),jt={class:"save-panel"},mt=gt(()=>Object(a["g"])("div",null,"Доступен",-1)),Ot=gt(()=>Object(a["g"])("div",null,"Сложность",-1)),ht={class:"difficalty"},vt=gt(()=>Object(a["g"])("div",null,"Время",-1)),ft=gt(()=>Object(a["g"])("div",null,"Рейтинг",-1)),wt={class:"raiting"},yt=["src"],_t={class:"user-menu"},Pt=Object(a["i"])(" Поделиться "),kt=["src"],It=["href"],Rt=["src","alt"];function $t(t,e,s,i,o,n){const c=Object(a["A"])("AddInRouteButton"),r=Object(a["A"])("ButtonHeart");return Object(a["t"])(),Object(a["f"])("div",jt,[Object(a["g"])("div",{class:Object(a["p"])(["save-panel__info",{"save-panel__info-mobile":!n.isDesktop}])},[mt,Object(a["i"])(" "+Object(a["C"])(n.currentPlace.availability)+" ",1),Ot,Object(a["g"])("div",ht,Object(a["C"])(n.currentPlace.difficulty),1),vt,Object(a["i"])(" "+Object(a["C"])(n.currentPlace.time)+" ",1),ft,Object(a["g"])("div",wt,[(Object(a["t"])(!0),Object(a["f"])(a["a"],null,Object(a["z"])(n.currentRaiting,e=>(Object(a["t"])(),Object(a["f"])("img",{key:"star"+e,src:t.$baseUrl+"/icons/star.png",alt:"star",class:"raiting__star"},null,8,yt))),128))])],2),Object(a["g"])("div",{class:Object(a["p"])(["save-panel__buttons",{"save-panel__buttons-mobile":!n.isDesktop}])},[Object(a["j"])(c,{placeId:n.currentPlace.id},null,8,["placeId"]),Object(a["j"])(r,{placeId:n.currentPlace.id},null,8,["placeId"]),Object(a["g"])("div",_t,[Pt,Object(a["g"])("img",{src:t.$baseUrl+"/icons/arrow.png",alt:"star",class:"user-menu__arrow"},null,8,kt),Object(a["g"])("div",{class:Object(a["p"])(["user-menu__dropdown-content",{"user-menu__dropdown-content-mobile":!n.isDesktop}])},[(Object(a["t"])(!0),Object(a["f"])(a["a"],null,Object(a["z"])(o.socials,t=>(Object(a["t"])(),Object(a["f"])("a",{key:t.alt,href:t.shareref+this.$route.path},[Object(a["g"])("img",{src:t.icon,alt:t.alt,class:"dropdown-content__link"},null,8,Rt)],8,It))),128))],2)])],2)])}const Ct="https://marshrutka.su/api",At=[{ref:"https://vk.com",shareref:"http://vkontakte.ru/share.php?url=https://marshrutka.ru",icon:Ct+"/icons/vk.png",alt:"vk"},{ref:"https://www.instagram.com",shareref:"https://telegram.me/share/url?url=https://marshrutka.ru",icon:Ct+"/icons/instagram.png",alt:"inst"},{ref:"https://tlgg.ru/likhachev_maxim",shareref:"https://telegram.me/share/url?url=https://marshrutka.ru",icon:Ct+"/icons/telegram.png",alt:"tele"},{ref:"https://wa.me/+79014534841",shareref:"whatsapp://send?text=http://marshrutka.ru",icon:Ct+"/icons/whatsapp.png",alt:"wa"}];function xt(t,e,s,i,o,n){const c=Object(a["A"])("MyButton");return Object(a["t"])(),Object(a["d"])(c,{title:n.isAddedInRouteTextButton,isRed:n.isAddedInRoute,onClick:n.addInMyRoute},null,8,["title","isRed","onClick"])}var Tt={name:"AddInRouteButton",props:["placeId"],components:{MyButton:Q},computed:{isAddedInRoute(){return!!this.$store.state.myRoute.find(t=>t.id===this.placeId)},isAddedInRouteTextButton(){return this.isAddedInRoute?"Убрать из маршрута":"Добавить в маршрут"}},methods:{async addInMyRoute(){await this.$store.dispatch("newPointInRoute",this.placeId),await this.$store.dispatch("getRoute")}}};const Dt=V()(Tt,[["render",xt]]);var Vt=Dt;const Ut=["src"];function Lt(t,e,s,i,o,n){return Object(a["t"])(),Object(a["f"])("img",{class:Object(a["p"])(["heart",{"heart-grey":n.isFavorite}]),src:t.$baseUrl+"/icons/heart.png",alt:"heart",onClick:e[0]||(e[0]=(...t)=>n.addInMyFavorites&&n.addInMyFavorites(...t))},null,10,Ut)}var St={name:"ButtonHeart",props:["placeId"],computed:{isFavorite(){return!!this.$store.state.myFavorites.find(t=>t.id===this.placeId)}},methods:{async addInMyFavorites(){await this.$store.dispatch("newFavorite",this.placeId),await this.$store.dispatch("getFavorites")}}};s("a86a");const Gt=V()(St,[["render",Lt],["__scopeId","data-v-29414ef6"]]);var Mt=Gt,Ft={data(){return{socials:At}},name:"SavePanel",components:{AddInRouteButton:Vt,ButtonHeart:Mt},computed:{currentPlace(){return this.$store.state.place},currentRaiting(){return Math.round(this.$store.state.reviews.reduce((t,e)=>t+e.raiting,0)/this.$store.state.reviews.length)},isDesktop(){return this.$store.state.isDesktop}}};s("98d0");const zt=V()(Ft,[["render",$t],["__scopeId","data-v-deaecaa8"]]);var Bt=zt;const Et=t=>(Object(a["w"])("data-v-40ed9f51"),t=t(),Object(a["u"])(),t),Ht={key:0},Jt=["src","onClick"],Nt=["src"],Kt={class:"gallery-container__item-last-text"},Wt=Et(()=>Object(a["g"])("div",{class:"slider-btn-icon slider-btn-icon-left"},null,-1)),qt=[Wt],Qt=["src"],Xt=Et(()=>Object(a["g"])("div",{class:"slider-btn-icon slider-btn-icon-right"},null,-1)),Yt=[Xt];function Zt(t,e,s,i,o,n){return s.images.length?(Object(a["t"])(),Object(a["f"])("div",Ht,[Object(a["g"])("div",{class:Object(a["p"])(["gallery-container",{"gallery-container-vertical":s.vertical}])},[(Object(a["t"])(),Object(a["f"])(a["a"],null,Object(a["z"])(3,(e,s)=>Object(a["g"])("img",{key:s,src:`${t.$baseUrl}/img/${this.images[s]}`,class:"gallery-container__item",onClick:t=>n.openGalleryPopup(s)},null,8,Jt)),64)),Object(a["g"])("div",{class:"gallery-container__item",onClick:e[0]||(e[0]=t=>n.openGalleryPopup(3))},[Object(a["g"])("img",{src:`${t.$baseUrl}/img/${this.images[3]}`,class:"gallery-container__item gallery-container__item-last-image"},null,8,Nt),Object(a["g"])("div",Kt,Object(a["C"])(n.picturesCount),1)])],2),n.showGallery?(Object(a["t"])(),Object(a["f"])("div",{key:0,class:"background",onClick:e[7]||(e[7]=Object(a["L"])((...t)=>n.closeGalleryPopup&&n.closeGalleryPopup(...t),["self"]))},[Object(a["g"])("div",{class:Object(a["p"])(["gallery-window",{"gallery-window-mobile":!n.isDesktop}]),tabindex:"-1",onKeyup:[e[4]||(e[4]=Object(a["K"])(Object(a["L"])(t=>n.switchGallaryPicture(1),["stop"]),["right"])),e[5]||(e[5]=Object(a["K"])(Object(a["L"])(t=>n.switchGallaryPicture(-1),["stop"]),["left"])),e[6]||(e[6]=Object(a["K"])(Object(a["L"])((...t)=>n.closeGalleryPopup&&n.closeGalleryPopup(...t),["stop"]),["esc"]))],ref:"gallary"},[Object(a["g"])("div",{class:"gallery-window__button-close",onClick:e[1]||(e[1]=(...t)=>n.closeGalleryPopup&&n.closeGalleryPopup(...t))}),Object(a["g"])("div",{class:"gallery-window__slider slider-left",onClick:e[2]||(e[2]=t=>n.switchGallaryPicture(-1))},qt),Object(a["g"])("img",{class:"gallery-window__image",src:t.$baseUrl+n.imageSrc},null,8,Qt),Object(a["g"])("div",{class:"gallery-window__slider slider-right",onClick:e[3]||(e[3]=t=>n.switchGallaryPicture(1))},Yt)],34)])):Object(a["e"])("",!0)])):Object(a["e"])("",!0)}var te=s("5c40"),ee={name:"Gallery",props:["images","vertical"],data(){return{currentPicture:0}},computed:{showGallery(){return this.$store.state.showGalleryPopup},imageSrc(){return"/img/"+this.images[this.currentPicture]},picturesCount(){return"+"+(this.images.length-4)},isDesktop(){return this.$store.state.isDesktop}},methods:{closeGalleryPopup(){this.$store.commit("setGalleryPopup")},switchGallaryPicture(t){this.currentPicture=this.currentPicture+t,this.currentPicture>=this.images.length&&(this.currentPicture=0),this.currentPicture<0&&(this.currentPicture=this.images.length-1)},openGalleryPopup(t){this.currentPicture=t,this.$store.commit("setGalleryPopup"),Object(te["v"])(()=>{this.$refs.gallary.focus()})}}};s("6386");const se=V()(ee,[["render",Zt],["__scopeId","data-v-40ed9f51"]]);var ae=se,ie={components:{MyButton:Q,Gallery:ae,SavePanel:Bt,ReviewMessages:bt},data(){return{inputValue:"",starHovered:""}},computed:{currentRoute(){return As.currentRoute.value.params.eng},currentPlace(){return this.$store.state.place},currentReviews(){return this.$store.state.reviews},currentPictures(){return this.$store.state.pictures},isDesktop(){return this.$store.state.isDesktop},currentRaiting(){return Math.round(this.$store.state.reviews.reduce((t,e)=>t+e.raiting,0)/this.$store.state.reviews.length)}},methods:{onStarHover(t){this.starHovered=t},async saveRewiew(){""!==this.inputValue&&""!==this.starHovered&&(await this.$store.dispatch("newReview",{text:this.inputValue,raiting:this.starHovered}),await this.$store.dispatch("getReviews",this.currentPlace.id),this.starHovered=this.inputValue="")}},async created(){await this.$store.dispatch("getPlace",this.currentRoute),await this.$store.dispatch("getPictures",this.currentRoute),await this.$store.dispatch("getReviews",this.currentPlace.id)}};s("87f6");const oe=V()(ie,[["render",J],["__scopeId","data-v-0214fe24"]]);var ne=oe;const ce={class:"registration--window"},re={class:"form"},le={class:"registration--window__form form"},ue={key:0,class:"input-text-wrong"},de={class:"form__password"},pe=["type"],be=["src"],ge={key:1,class:"input-text-wrong"},je={class:"form__password"},me=["type"],Oe=["src"],he={key:2,class:"input-text-wrong"},ve=Object(a["i"])("Уже зарегистрированы? ");function fe(t,e,s,i,o,n){const c=Object(a["A"])("Title"),r=Object(a["A"])("MyButton");return Object(a["t"])(),Object(a["f"])("div",ce,[Object(a["g"])("div",re,[Object(a["j"])(c,{text:"Регистрация"}),Object(a["g"])("div",le,[Object(a["J"])(Object(a["g"])("input",{class:"form__input","onUpdate:modelValue":e[0]||(e[0]=e=>t.name=e),type:"text",placeholder:"Логин"},null,512),[[a["G"],t.name]]),Object(a["J"])(Object(a["g"])("input",{"onUpdate:modelValue":e[1]||(e[1]=e=>t.email=e),class:"form__input",type:"email",placeholder:"E-mail",onInput:e[2]||(e[2]=(...t)=>n.clearEmailValidation&&n.clearEmailValidation(...t)),onBlur:e[3]||(e[3]=(...t)=>n.validateEmail&&n.validateEmail(...t))},null,544),[[a["G"],t.email]]),t.emailValidated&&!n.isValidEmail?(Object(a["t"])(),Object(a["f"])("div",ue,"Введите корректный email ")):Object(a["e"])("",!0),Object(a["g"])("div",de,[Object(a["J"])(Object(a["g"])("input",{class:"form__input","onUpdate:modelValue":e[4]||(e[4]=e=>t.password=e),onInput:e[5]||(e[5]=(...t)=>n.clearPasswordValidation&&n.clearPasswordValidation(...t)),onBlur:e[6]||(e[6]=(...t)=>n.validatePassword&&n.validatePassword(...t)),type:t.typePassword,placeholder:"Пароль"},null,40,pe),[[a["E"],t.password]]),Object(a["g"])("img",{class:"password-eye",src:`${t.$baseUrl}/icons/${t.eyeIconPassword}.png`,onClick:e[7]||(e[7]=(...t)=>n.togglePasswordVisibility&&n.togglePasswordVisibility(...t))},null,8,be)]),t.passwordValidated&&!n.isValidPassword?(Object(a["t"])(),Object(a["f"])("div",ge," Пароль должен быть больше 6 символов и включать латниские буквы и цифры ")):Object(a["e"])("",!0),Object(a["g"])("div",je,[Object(a["J"])(Object(a["g"])("input",{"onUpdate:modelValue":e[8]||(e[8]=e=>t.rePassword=e),class:"form__input",type:t.typePassword,placeholder:"Повторно введите пароль"},null,8,me),[[a["E"],t.rePassword]]),Object(a["g"])("img",{class:"password-eye",onClick:e[9]||(e[9]=(...t)=>n.togglePasswordVisibility&&n.togglePasswordVisibility(...t)),src:`${t.$baseUrl}/icons/${t.eyeIconPassword}.png`},null,8,Oe)]),t.password!==t.rePassword&&t.rePassword.length>6?(Object(a["t"])(),Object(a["f"])("div",he," Пароли не совпадают ")):Object(a["e"])("",!0),Object(a["j"])(r,{title:"Зарегистрироваться",isDisabled:!n.inputIsCorrect,onClick:n.registration},null,8,["isDisabled","onClick"]),Object(a["g"])("p",null,[ve,Object(a["g"])("a",{class:"registration--window__link",onClick:e[10]||(e[10]=(...t)=>n.setLoginPopup&&n.setLoginPopup(...t))},"Войти")])])])])}var we={components:{MyButton:Q,Title:ut},data:()=>({name:"",email:"",password:"",rePassword:"",typePassword:"password",eyeIconPassword:"hide",emailValidationText:"Введите корректный email",emailValidated:!1,passwordValidated:!1}),computed:{isValidEmail(){return this.email.includes("@")&&this.email.includes(".")},isValidPassword(){const t=/[0-9]/,e=/[A-z]/;return this.password.length>6&&this.password.match(t)&&this.password.match(e)||this.password.length<1},inputIsCorrect(){return""!==this.password&&this.password===this.rePassword&&this.isValidEmail&&this.isValidPassword&&""!==this.name}},methods:{validatePassword(){return this.passwordValidated=!0,this.isValidPassword?"":this.passwordValidationText},validateEmail(){return this.emailValidated=!0,this.isValidEmail?"":this.emailValidationText},clearPasswordValidation(){this.passwordValidated=!1},clearEmailValidation(){this.emailValidated=!1},setLoginPopup(){this.$store.commit("setLoginPopup")},togglePasswordVisibility(){"text"===this.typePassword?(this.typePassword="password",this.eyeIconPassword="hide"):(this.typePassword="text",this.eyeIconPassword="show")},async registration(){const t={name:this.name,email:this.email,password:this.password},e=await this.$store.dispatch("registration",t);200===e.status&&As.push({name:"MyPlaces"})}}};s("e99a");const ye=V()(we,[["render",fe],["__scopeId","data-v-dcac246a"]]);var _e=ye;const Pe={class:"myRoute-page"},ke={class:"map"};function Ie(t,e,s,i,o,n){const c=Object(a["A"])("ymap-marker"),r=Object(a["A"])("yandex-map"),l=Object(a["A"])("MyButton"),u=Object(a["A"])("RoutePoint");return Object(a["t"])(),Object(a["f"])("div",Pe,[Object(a["g"])("div",ke,[Object(a["j"])(r,{coords:o.coords,zoom:"5",controls:o.controls,onMapWasInitialized:n.mapInitialized},{default:Object(a["I"])(()=>[Object(a["j"])(c,{coords:o.coords,"marker-id":"Старт","hint-content":""},null,8,["coords"])]),_:1},8,["coords","controls","onMapWasInitialized"])]),Object(a["j"])(l,{title:"Постороить маршрут",onClick:n.routeCreate},null,8,["onClick"]),(Object(a["t"])(!0),Object(a["f"])(a["a"],null,Object(a["z"])(n.myRoute,t=>(Object(a["t"])(),Object(a["d"])(u,{key:t.id,routePoint:t},null,8,["routePoint"]))),128))])}const Re={class:"route-point__preview"},$e=["src"],Ce={class:"route-point__name"},Ae={key:0,class:"route-point__info"},xe={class:"route-point__time"},Te={class:"route-point__time"},De={class:"route-point__time"},Ve={class:"route-point__buttons"},Ue={class:"route-point__description"},Le={key:0,class:"route-point__info"},Se={class:"route-point__time"},Ge={class:"route-point__time"},Me={class:"route-point__time"};function Fe(t,e,s,i,o,n){const c=Object(a["A"])("AddInRouteButton"),r=Object(a["A"])("ButtonHeart"),l=Object(a["A"])("PlacePreview");return Object(a["t"])(),Object(a["f"])("div",null,[Object(a["g"])("div",{class:Object(a["p"])(["route-point",{"route-point--full-size":o.isFullSize,"route-point-mobile":!n.isDesktop}]),onClick:e[0]||(e[0]=(...t)=>n.toggleSize&&n.toggleSize(...t))},[Object(a["g"])("div",{class:Object(a["p"])(["route-point__container",{"route-point__container-desktop":n.isDesktop}])},[Object(a["g"])("div",Re,[Object(a["g"])("img",{src:t.$baseUrl+"/icons/arrow.png",alt:"star",class:Object(a["p"])(["route-point__arrow",{"route-point__arrow-down":o.isFullSize}])},null,10,$e),Object(a["g"])("div",Ce,Object(a["C"])(s.routePoint.name),1),n.isDesktop?(Object(a["t"])(),Object(a["f"])("div",Ae,[Object(a["g"])("div",xe,Object(a["C"])(s.routePoint.time),1),Object(a["g"])("div",Te,Object(a["C"])(s.routePoint.availability),1),Object(a["g"])("div",De,Object(a["C"])(s.routePoint.difficulty),1)])):Object(a["e"])("",!0)]),Object(a["g"])("div",Ve,[Object(a["j"])(c,{placeId:s.routePoint.id},null,8,["placeId"]),Object(a["j"])(r,{placeId:s.routePoint.id},null,8,["placeId"])])],2),Object(a["j"])(l,{routePoint:s.routePoint},null,8,["routePoint"]),Object(a["g"])("div",null,[Object(a["g"])("div",Ue,Object(a["C"])(s.routePoint.description),1),n.isDesktop?Object(a["e"])("",!0):(Object(a["t"])(),Object(a["f"])("div",Le,[Object(a["g"])("div",Se,Object(a["C"])(s.routePoint.time),1),Object(a["g"])("div",Ge,Object(a["C"])(s.routePoint.availability),1),Object(a["g"])("div",Me,Object(a["C"])(s.routePoint.difficulty),1)]))])],2)])}var ze={components:{AddInRouteButton:Vt,PlacePreview:L,ButtonHeart:Mt},props:["routePoint","FullSize","ButtonsReverse"],data(){return{isFullSize:this.FullSize}},computed:{isDesktop(){return this.$store.state.isDesktop}},methods:{toggleSize(){this.isFullSize=!this.isFullSize}}};s("8b90");const Be=V()(ze,[["render",Fe],["__scopeId","data-v-76f15642"]]);var Ee=Be,He=s("bc3a"),Je=s.n(He),Ne=(s("0804"),s("e30e")),Ke=s.n(Ne);const We={ERROR:"rgb(255, 98, 98)",SUCCCES:"rgb(0, 212, 141)",WARNING:"rgb(234, 206, 127)"},qe=(t,e,s,a)=>{Ke()({text:e,duration:3e3,newWindow:!0,close:!0,gravity:s,position:a,stopOnFocus:!0,style:{background:t,border:"2px solid black"},onClick:function(){}}).showToast()},Qe=t=>{t.interceptors.request.use(t=>{var e;const s=null===(e=JSON.parse(localStorage.getItem("userData")))||void 0===e?void 0:e.token;return s&&(t.headers["Authorization"]="Bearer "+s),t},t=>Promise.reject(t));let e=null;t.interceptors.response.use((function(t){return t}),async s=>{const a=s.config;if(401===s.response.status){if(e)await e;else{var i;e=t.post("refresh",{token:null===(i=JSON.parse(localStorage.getItem("userData")))||void 0===i?void 0:i.refreshToken});const s=await e;e=null,localStorage.setItem("userData",JSON.stringify({token:s.data.accessToken,refreshToken:s.data.refreshToken}))}return t(a)}403===s.response.status&&s.response.data&&qe(We.ERROR,s.response.data.message,"bottom","left"),qe(We.ERROR,s.response.data.message,"bottom","left")})},Xe=Je.a.create({baseURL:"https://marshrutka.su/api",headers:{"Content-Type":"application/json"}});Qe(Xe);let Ye=null;var Ze={components:{RoutePoint:Ee,MyButton:Q},data(){return{coords:[54.82896654088406,39.8318938227539],controls:["default"]}},computed:{user(){return this.$store.state.user},myRoute(){return this.$store.state.myRoute},routeCoords(){return this.$store.state.myRoute.map(t=>t.coords)}},methods:{async getMyOptimalRoute(){await this.$store.dispatch("getOptimalRoute")},async routeCreate(){try{await Xe.get("optimalroute?id="+this.$store.state.user.id)}catch(t){console.log("Ошибка HTTP: "+t.response.data.message)}},async routeCreate1(){const t=this.routeCoords;for(let e=0;e<t.length;e++)for(let s=e+1;s<t.length;s++)await this.newRoute([t[e],t[s]])},async newRoute(t){const e=new window.ymaps.multiRouter.MultiRoute({referencePoints:t},{editorDrawOver:!1,wayPointDraggable:!1,viaPointDraggable:!1,routeStrokeColor:"000088",routeActiveStrokeColor:"ff0000",pinIconFillColor:"ff0000",boundsAutoApply:!0,zoomMargin:30});e.model.events.add("requestsuccess",(function(){const s=e.getActiveRoute(),a=t[0],i=t[1],o=s.properties.get("distance").value,n=s.properties.get("duration").value;console.log(a),console.log(i),console.log(o),console.log(n)}))},async findMe(){const t=window.ymaps.geolocation.get();return t.then((function(t){return Ye.geoObjects.add(t.geoObjects),t.geoObjects.position}))},async addInRouteMap(t,e,s,a){const i=await Xe.post("routemap",{place1:t,place2:e,distance:s,duration:a}),o=await i.json();console.log(o.message)},mapInitialized(t){Ye=t}}};s("0980");const ts=V()(Ze,[["render",Ie],["__scopeId","data-v-0c20d743"]]);var es=ts;const ss={class:"favorite-page"};function as(t,e,s,i,o,n){const c=Object(a["A"])("Title"),r=Object(a["A"])("RoutePoint");return Object(a["t"])(),Object(a["f"])("div",ss,[Object(a["j"])(c,{text:n.titleText},null,8,["text"]),(Object(a["t"])(!0),Object(a["f"])(a["a"],null,Object(a["z"])(n.myFavorites,t=>(Object(a["t"])(),Object(a["d"])(r,{key:t,routePoint:t,FullSize:!1,ButtonsReverse:!0},null,8,["routePoint"]))),128))])}var is={components:{RoutePoint:Ee,Title:ut},computed:{myFavorites(){return this.$store.state.myFavorites},titleText(){return 0===this.myFavorites.length?"Пока здесь пусто":"Избранное: "+this.myFavorites.length}}};s("484c");const os=V()(is,[["render",as],["__scopeId","data-v-96bf8ca2"]]);var ns=os;const cs=t=>(Object(a["w"])("data-v-2231620e"),t=t(),Object(a["u"])(),t),rs={class:"registration--window"},ls={class:"form"},us=cs(()=>Object(a["g"])("label",{class:"form__input--btn",for:"file"},"Изменить аватар",-1));function ds(t,e,s,i,o,n){const c=Object(a["A"])("Title"),r=Object(a["A"])("Avatar"),l=Object(a["A"])("MyButton");return Object(a["t"])(),Object(a["f"])("div",rs,[Object(a["j"])(c,{text:"Настройки"}),Object(a["g"])("div",ls,[Object(a["j"])(r,{userName:n.user.name,userImg:n.user.avatar,vertical:!0,hideName:!0,big:!0},null,8,["userName","userImg"]),Object(a["g"])("input",{class:"form__input--file",type:"file",id:"file",ref:"file",accept:"image/jpeg",onChange:e[0]||(e[0]=t=>n.handleFilesUploads())},null,544),us,Object(a["J"])(Object(a["g"])("input",{class:"form__input-text","onUpdate:modelValue":e[1]||(e[1]=e=>t.oldEmail=e),type:"email",placeholder:"Старый e-mail"},null,512),[[a["G"],t.oldEmail]]),Object(a["J"])(Object(a["g"])("input",{class:"form__input-text","onUpdate:modelValue":e[2]||(e[2]=e=>t.newEmail=e),type:"email",placeholder:"Новый e-mail"},null,512),[[a["G"],t.newEmail]]),Object(a["J"])(Object(a["g"])("input",{class:"form__input-text","onUpdate:modelValue":e[3]||(e[3]=e=>t.oldPassword=e),type:"password",placeholder:"Старый пароль"},null,512),[[a["G"],t.oldPassword]]),Object(a["J"])(Object(a["g"])("input",{class:"form__input-text","onUpdate:modelValue":e[4]||(e[4]=e=>t.newPassword=e),type:"password",placeholder:"Новый пароль"},null,512),[[a["G"],t.newPassword]]),Object(a["j"])(l,{title:"Применить изменения",onClick:n.settingsAccept},null,8,["onClick"])])])}var ps={components:{MyButton:Q,Avatar:ot,Title:ut},data:()=>({oldEmail:"",newEmail:"",oldPassword:"",newPassword:"",file:""}),methods:{handleFilesUploads(){this.file=this.$refs.file.files[0]},async settingsAccept(){const t=new FormData;t.append("name",this.user.name),t.append("oldEmail",this.oldEmail),t.append("oldPassword",this.oldPassword),t.append("email",this.newEmail),t.append("password",this.newPassword),t.append("image",this.file),await Xe.post("/settings",t),this.oldEmail=this.newEmail=this.oldPassword=this.newPassword=this.file=""}},computed:{user(){return this.$store.state.user}}};s("2ac8");const bs=V()(ps,[["render",ds],["__scopeId","data-v-2231620e"]]);var gs=bs;const js=t=>(Object(a["w"])("data-v-215bbd64"),t=t(),Object(a["u"])(),t),ms={class:"registration--window"},Os={class:"form"},hs=Object(a["h"])('<datalist id="tags" data-v-215bbd64><option value="waterfall" data-v-215bbd64>Водопады</option><option value="lake" data-v-215bbd64>Озера</option><option value="mountain" data-v-215bbd64>Горы</option><option value="abonded" data-v-215bbd64>Заброшки</option></datalist>',1),vs=js(()=>Object(a["g"])("datalist",{id:"region"},[Object(a["g"])("option",{value:"Абхазия"},"Abkhazia"),Object(a["g"])("option",{value:"Сочи"},"Sochi"),Object(a["g"])("option",{value:"Красная Поляна"},"Krasnaia Polyana")],-1)),fs=js(()=>Object(a["g"])("datalist",{id:"difficulty"},[Object(a["g"])("option",{value:"light"},"Легкий"),Object(a["g"])("option",{value:"medium"},"Средний"),Object(a["g"])("option",{value:"hard"},"Сложный")],-1)),ws={class:"form__input--month"},ys=js(()=>Object(a["g"])("div",null,"Доступность",-1)),_s=Object(a["h"])('<datalist id="month" data-v-215bbd64><option value="январь" data-v-215bbd64></option><option value="февраль" data-v-215bbd64></option><option value="март" data-v-215bbd64></option><option value="апрель" data-v-215bbd64></option><option value="май" data-v-215bbd64></option><option value="июнь" data-v-215bbd64></option><option value="июль" data-v-215bbd64></option><option value="август" data-v-215bbd64></option><option value="сентябрь" data-v-215bbd64></option><option value="октябрь" data-v-215bbd64></option><option value="ноябрь" data-v-215bbd64></option><option value="декабрь" data-v-215bbd64></option></datalist> - ',2);function Ps(t,e,s,i,o,n){const c=Object(a["A"])("Title"),r=Object(a["A"])("MyButton");return Object(a["t"])(),Object(a["f"])("div",ms,[Object(a["g"])("div",Os,[Object(a["j"])(c,{text:"Добавь новый обьект"}),Object(a["J"])(Object(a["g"])("input",{class:"form__input","onUpdate:modelValue":e[0]||(e[0]=e=>t.eng=e),type:"text",placeholder:"Название объекта на английском"},null,512),[[a["G"],t.eng]]),Object(a["J"])(Object(a["g"])("input",{class:"form__input","onUpdate:modelValue":e[1]||(e[1]=e=>t.name=e),type:"text",placeholder:"Название объекта на русском"},null,512),[[a["G"],t.name]]),Object(a["J"])(Object(a["g"])("input",{class:"form__input",type:"text",list:"tags",placeholder:"tag","onUpdate:modelValue":e[2]||(e[2]=e=>t.tag=e)},null,512),[[a["G"],t.tag]]),hs,Object(a["J"])(Object(a["g"])("input",{class:"form__input",type:"text",list:"region",placeholder:"region","onUpdate:modelValue":e[3]||(e[3]=e=>t.region=e)},null,512),[[a["G"],t.region]]),vs,Object(a["J"])(Object(a["g"])("input",{class:"form__input",type:"text",placeholder:"city","onUpdate:modelValue":e[4]||(e[4]=e=>t.city=e)},null,512),[[a["G"],t.city]]),Object(a["J"])(Object(a["g"])("input",{class:"form__input",type:"text",list:"difficulty",placeholder:"сложность","onUpdate:modelValue":e[5]||(e[5]=e=>t.difficulty=e)},null,512),[[a["G"],t.difficulty]]),fs,Object(a["g"])("div",ws,[ys,Object(a["J"])(Object(a["g"])("input",{class:"form__input",type:"text",list:"month","onUpdate:modelValue":e[6]||(e[6]=e=>t.availability1=e)},null,512),[[a["G"],t.availability1]]),_s,Object(a["J"])(Object(a["g"])("input",{class:"form__input",type:"text",list:"month","onUpdate:modelValue":e[7]||(e[7]=e=>t.availability2=e)},null,512),[[a["G"],t.availability2]])]),Object(a["J"])(Object(a["g"])("input",{class:"form__input",type:"text",placeholder:"время","onUpdate:modelValue":e[8]||(e[8]=e=>t.time=e)},null,512),[[a["G"],t.time]]),Object(a["J"])(Object(a["g"])("textarea",{class:"input-rewiew__input",type:"text",placeholder:"Описание","onUpdate:modelValue":e[9]||(e[9]=e=>t.description=e)},null,512),[[a["G"],t.description]]),Object(a["J"])(Object(a["g"])("input",{class:"form__input",type:"text",placeholder:"43.434954,40.442885","onUpdate:modelValue":e[10]||(e[10]=e=>t.coords=e)},null,512),[[a["G"],t.coords]]),Object(a["g"])("input",{type:"file",id:"files",ref:"files",multiple:"",accept:"image/jpeg",onChange:e[11]||(e[11]=t=>n.handleFilesUploads())},null,544),Object(a["j"])(r,{title:"Добавить Обьект",onClick:n.addNewPlace},null,8,["onClick"])])])}var ks={components:{MyButton:Q,Title:ut},data:()=>({eng:"",name:"",tag:"",region:"",city:"",difficulty:"",availability1:"",availability2:"",time:"",description:"",coords:"",files:""}),methods:{async addNewPlace(){const t=new FormData;t.append("eng",this.eng),t.append("name",this.name),t.append("tag",this.tag),t.append("region",this.region),t.append("city",this.city),t.append("difficulty",this.difficulty),t.append("availability",this.availability1+" - "+this.availability2),t.append("time",this.time),t.append("description",this.description),t.append("coords",this.coords),t.append("pictures",this.files.length),Object.values(this.files).forEach(e=>{t.append("images",e)}),await Xe.post("newplace",t,{headers:{"Content-Type":"multipart/form-data"}})},handleFilesUploads(){this.files=this.$refs.files.files}}};s("22a7");const Is=V()(ks,[["render",Ps],["__scopeId","data-v-215bbd64"]]);var Rs=Is,$s=s("6c02");const Cs=[{path:"/",name:"MyPlaces",component:M},{path:"/:eng",name:"Description",component:ne},{path:"/registration",name:"Registration",component:_e},{path:"/myroute",name:"MyRoute",component:es},{path:"/myfavorites",name:"MyFavorites",component:ns},{path:"/settings",name:"Settings",component:gs},{path:"/admin",name:"Admin",component:Rs}],As=Object($s["a"])({history:Object($s["b"])(),routes:Cs});As.beforeEach(()=>{window.scroll(0,0)});var xs={name:"Header",components:{MyButton:Q,Avatar:ot},data:()=>({selectedRegion:""}),computed:{user(){return this.$store.state.user},isLogIn(){return!Object.keys(this.user).length},userInfo(){return{name:this.user.name?this.user.name:"Неопознанный турист",avatar:this.user.avatar?this.user.avatar:"tourist.png"}},isAdmin(){return"Admin"===this.user.name},isDesktop(){return this.$store.state.isDesktop},isStartPage(){return"/"===this.$route.fullPath}},methods:{setLoginPopup(){this.isLogIn?this.$store.commit("setLoginPopup"):(this.$store.dispatch("logOut"),As.push({name:"MyPlaces"}))},setselectedRegion(){this.$store.commit("setselectedRegion",this.selectedRegion),this.selectedRegion=""}}};s("8220");const Ts=V()(xs,[["render",h],["__scopeId","data-v-ef6652c4"]]);var Ds=Ts;const Vs={class:"footer"},Us={href:"tel:+79014534841",class:"contacts-typical__item"},Ls=["src"],Ss=Object(a["i"])(" +79014534841 "),Gs={href:"mailto:macs0007@mail.ru",class:"contacts-typical__item"},Ms=["src"],Fs=Object(a["i"])(" macs0007@mail.ru "),zs={class:"footer__contacts-social"},Bs=["href"],Es=["src","alt"],Hs=Object(a["i"])("© 2022, Marshrutka Limited Sochifornia");function Js(t,e,s,i,o,n){const c=Object(a["A"])("router-link");return Object(a["t"])(),Object(a["f"])("div",Vs,[Object(a["g"])("div",{class:Object(a["p"])(["footer__contacts-typical",{"footer__contacts-typical-mobile":!n.isDesktop}])},[Object(a["g"])("a",Us,[Object(a["g"])("img",{src:t.$baseUrl+"/icons/russia-flag.png",alt:"tel"},null,8,Ls),Ss]),Object(a["g"])("a",Gs,[Object(a["g"])("img",{src:t.$baseUrl+"/icons/mail.png",alt:"mail"},null,8,Ms),Fs])],2),Object(a["g"])("div",zs,[(Object(a["t"])(!0),Object(a["f"])(a["a"],null,Object(a["z"])(o.socials,t=>(Object(a["t"])(),Object(a["f"])("a",{key:t.alt,href:t.ref},[Object(a["g"])("img",{src:t.icon,alt:t.alt,class:"contacts-social__item"},null,8,Es)],8,Bs))),128))]),Object(a["j"])(c,{to:"/",class:Object(a["p"])(["footer__logo-name",{"footer__logo-name-mobile":!n.isDesktop}])},{default:Object(a["I"])(()=>[Hs]),_:1},8,["class"])])}var Ns={data(){return{socials:At}},computed:{isDesktop(){return this.$store.state.isDesktop}}};s("995b");const Ks=V()(Ns,[["render",Js],["__scopeId","data-v-4f32a409"]]);var Ws=Ks;const qs={class:"form"},Qs={class:"form__input-text",ref:"name",type:"text",placeholder:"Логин",tabindex:"-1"},Xs={class:"form__input-text",ref:"password",type:"password",placeholder:"Пароль"},Ys=Object(a["i"])("Впервые у нас? "),Zs=Object(a["i"])("Зарегистрируйтесь");function ta(t,e,s,i,o,n){const c=Object(a["A"])("Title"),r=Object(a["A"])("MyButton"),l=Object(a["A"])("router-link");return Object(a["t"])(),Object(a["f"])("div",{class:"background",onClick:e[3]||(e[3]=Object(a["L"])((...t)=>n.setLoginPopup&&n.setLoginPopup(...t),["self"]))},[Object(a["g"])("div",{class:Object(a["p"])(["login-window",{"login-window-mobile":!n.isDesktop}]),onKeyup:[e[1]||(e[1]=Object(a["K"])(Object(a["L"])((...t)=>n.setLoginPopup&&n.setLoginPopup(...t),["stop"]),["esc"])),e[2]||(e[2]=Object(a["K"])(Object(a["L"])((...t)=>n.login&&n.login(...t),["stop"]),["enter"]))]},[Object(a["j"])(c,{text:"Вход"}),Object(a["g"])("div",{class:"button-close",onClick:e[0]||(e[0]=(...t)=>n.setLoginPopup&&n.setLoginPopup(...t))}),Object(a["g"])("div",qs,[Object(a["g"])("input",Qs,null,512),Object(a["g"])("input",Xs,null,512),Object(a["j"])(r,{onClick:n.login,title:"Войти"},null,8,["onClick"]),Object(a["g"])("div",null,[Ys,Object(a["j"])(l,{to:"/registration",onClick:n.setLoginPopup},{default:Object(a["I"])(()=>[Zs]),_:1},8,["onClick"])])])],34)])}var ea={name:"LoginPopup",components:{MyButton:Q,Title:ut},computed:{isDesktop(){return this.$store.state.isDesktop}},methods:{setLoginPopup(){this.$store.commit("setLoginPopup")},login(){const t={name:this.$refs.name.value,password:this.$refs.password.value};this.$store.dispatch("login",t)}},mounted(){this.$refs.name.focus()}};s("3166");const sa=V()(ea,[["render",ta],["__scopeId","data-v-2edf1e3d"]]);var aa=sa;const ia=()=>{const t=750;return window.innerWidth>=t};var oa={name:"App",components:{Header:Ds,Footer:Ws,LoginPopup:aa},computed:{isDesktop(){return this.$store.state.isDesktop}},mounted(){localStorage.getItem("userData")?this.$store.dispatch("getUser"):this.$store.dispatch("logOut"),this.$store.commit("setIsDesktop",ia()),window.addEventListener("resize",()=>{this.$store.commit("setIsDesktop",ia())})}};s("1bb1");const na=V()(oa,[["render",o]]);var ca=na,ra=s("5502");const la=Object(ra["a"])({state(){return{selectedRegion:"Все",showLoginPopup:!1,showGalleryPopup:!1,myRoute:[],myFavorites:[],places:[],place:{},reviews:[],pictures:[],user:{},isDesktop:!0}},actions:{logOut(){localStorage.removeItem("userData"),this.state.user={},this.state.myRoute=[],this.state.myFavorites=[]},async getPlaces(){try{const t=await Xe.get("places");this.commit("setPlaces",t.data)}catch(t){console.log("Ошибка HTTP: "+t)}},async getPlace(t,e){try{const t=await Xe.get("place?id="+e);this.commit("setPlace",t.data)}catch(s){console.log("Ошибка HTTP: "+s)}},async getReviews(t,e){try{const t=await Xe.get("review?id="+e);this.commit("setReviews",t.data)}catch(s){console.log("Ошибка HTTP: "+s)}},async getPictures(t,e){try{const t=await Xe.get("pictures?id="+e);this.commit("setPictures",t.data)}catch(s){console.log("Ошибка HTTP: "+s)}},async getFavorites(){try{const t=await Xe.get("favorite?id="+this.state.user.id);this.commit("setmyFavorites",t.data)}catch(t){console.log("Ошибка HTTP: "+t)}},async getRoute(){try{const t=await Xe.get("route?id="+this.state.user.id);this.commit("setmyRoute",t.data)}catch(t){console.log("Ошибка HTTP: "+t)}},async getUser(){try{const t=await Xe.get("user");this.commit("setUser",t.data.user),this.dispatch("getFavorites"),this.dispatch("getRoute")}catch(t){console.log("Ошибка HTTP: "+t)}},async newReview(t,e){try{await Xe.post("review",{text:e.text,raiting:e.raiting,userId:this.state.user.id,placeId:this.state.place.id})}catch(s){console.log("Ошибка HTTP: "+s)}},async newFavorite(t,e){try{await Xe.post("favorite",{userId:this.state.user.id,placeId:e})}catch(s){console.log("Ошибка HTTP: "+s)}},async newPointInRoute(t,e){try{await Xe.post("route",{userId:this.state.user.id,placeId:e})}catch(s){console.log("Ошибка HTTP: "+s)}},async login(t,e){try{const t=await Xe.post("login",{name:e.name,password:e.password});localStorage.setItem("userData",JSON.stringify({token:t.data.token,refreshToken:t.data.refreshToken})),this.commit("setUser",t.data.user),this.commit("setLoginPopup")}catch(s){console.log("Ошибка HTTP: "+s)}},async registration(t,e){try{const t=await Xe.post("registration",{name:e.name,password:e.password,email:e.email});localStorage.setItem("userData",JSON.stringify({token:t.data.token,refreshToken:t.data.refreshToken})),this.commit("setUser",t.data.user)}catch(s){console.log("Ошибка HTTP: "+s)}}},mutations:{setselectedRegion(t,e){t.selectedRegion=e},setLoginPopup(t){t.showLoginPopup=!t.showLoginPopup},setGalleryPopup(t){t.showGalleryPopup=!t.showGalleryPopup},setCurrentPicture(t,e){t.currentPicture=e},setmyRoute(t,e){t.myRoute=e},setMyOptimalRoute(t,e){t.myOptimalRoute=e},setmyFavorites(t,e){t.myFavorites=e},setPlaces(t,e){t.places=e},setPlace(t,e){t.place=e},setUser(t,e){t.user=e},setReviews(t,e){t.reviews=e},setPictures(t,e){t.pictures=e},setIsDesktop(t,e){t.isDesktop=e}}});var ua=s("f5ce");const da={apiKey:"378194c2-3ccf-497c-8950-da741a79edd2",lang:"ru_RU",coordorder:"latlong",enterprise:!1,version:"2.1"},pa=Object(a["c"])(ca).use(As).use(la).use(ua["a"],da);pa.config.globalProperties.$baseUrl="https://marshrutka.su/api",pa.mount("#app")},"5a40":function(t,e,s){},6386:function(t,e,s){"use strict";s("110f")},"66a8":function(t,e,s){},"6a89":function(t,e,s){},"72d1":function(t,e,s){},8220:function(t,e,s){"use strict";s("ed14")},"86e1":function(t,e,s){},"87f6":function(t,e,s){"use strict";s("bb44")},"8b90":function(t,e,s){"use strict";s("32ee")},9481:function(t,e,s){"use strict";s("1531")},"98d0":function(t,e,s){"use strict";s("53f7")},"995b":function(t,e,s){"use strict";s("72d1")},"9f1f":function(t,e,s){},a86a:function(t,e,s){"use strict";s("9f1f")},abfa:function(t,e,s){"use strict";s("b1ab")},b1ab:function(t,e,s){},b97f:function(t,e,s){},bb44:function(t,e,s){},e99a:function(t,e,s){"use strict";s("5a40")},ed14:function(t,e,s){},fc4e:function(t,e,s){}});
//# sourceMappingURL=app.977cfdc4.js.map