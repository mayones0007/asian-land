(function(t){function e(e){for(var a,c,n=e[0],r=e[1],l=e[2],d=0,p=[];d<n.length;d++)c=n[d],Object.prototype.hasOwnProperty.call(i,c)&&i[c]&&p.push(i[c][0]),i[c]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);u&&u(e);while(p.length)p.shift()();return o.push.apply(o,l||[]),s()}function s(){for(var t,e=0;e<o.length;e++){for(var s=o[e],a=!0,n=1;n<s.length;n++){var r=s[n];0!==i[r]&&(a=!1)}a&&(o.splice(e--,1),t=c(c.s=s[0]))}return t}var a={},i={app:0},o=[];function c(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,c),s.l=!0,s.exports}c.m=t,c.c=a,c.d=function(t,e,s){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(c.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)c.d(s,a,function(e){return t[e]}.bind(null,a));return s},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],r=n.push.bind(n);n.push=e,n=n.slice();for(var l=0;l<n.length;l++)e(n[l]);var u=r;o.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"0b98":function(t,e,s){},"110f":function(t,e,s){},"1bb1":function(t,e,s){"use strict";s("86e1")},2469:function(t,e,s){"use strict";s("278a")},"278a":function(t,e,s){},3166:function(t,e,s){"use strict";s("fc4e")},"32ee":function(t,e,s){},3506:function(t,e,s){"use strict";s("6a89")},"3b46":function(t,e,s){},4977:function(t,e,s){"use strict";s("cd5c")},5458:function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e),s.d(e,"settings",(function(){return ga}));var a=s("7a23");const i={class:"app-container"};function o(t,e,s,o,c,n){const r=Object(a["A"])("Header"),l=Object(a["A"])("router-view"),u=Object(a["A"])("LoginPopup"),d=Object(a["A"])("Footer");return Object(a["t"])(),Object(a["f"])("div",i,[Object(a["j"])(r),Object(a["j"])(l),this.$store.state.showLoginPopup?(Object(a["t"])(),Object(a["d"])(u,{key:0})):Object(a["e"])("",!0),Object(a["j"])(d,{class:"footer"})])}const c=t=>(Object(a["w"])("data-v-7134d034"),t=t(),Object(a["u"])(),t),n={class:"header"},r=["src"],l=c(()=>Object(a["g"])("div",{class:"logo__name"},"Маршрутка",-1)),u=Object(a["h"])('<datalist id="region" data-v-7134d034><option value="Абхазия" data-v-7134d034>Abkhazia</option><option value="Сочи" data-v-7134d034>Sochi</option><option value="Красная Поляна" data-v-7134d034>Krasnaia Polyana</option><option value="Все" data-v-7134d034>All</option></datalist>',1),d={class:"user-menu"},p={key:0,class:"user-menu__arrow"},b={key:1,class:"user-menu__dropdown-content"},g=Object(a["i"])("Мой маршрут"),j=Object(a["i"])("Избранное"),m=Object(a["i"])("Настройки"),O=Object(a["i"])("Редактировать");function h(t,e,s,i,o,c){const h=Object(a["A"])("router-link"),f=Object(a["A"])("MyButton"),v=Object(a["A"])("Avatar");return Object(a["t"])(),Object(a["f"])("div",n,[Object(a["j"])(h,{to:"/",class:"logo"},{default:Object(a["I"])(()=>[Object(a["g"])("img",{class:"logo__icon",src:t.$baseUrl+"/icons/logo.svg",alt:"Маршрутка"},null,8,r),l]),_:1}),c.isStartPage||c.isDesktop?(Object(a["t"])(),Object(a["f"])("div",{key:0,class:Object(a["p"])(["search-form",{"search-form-mobile":!c.isDesktop}])},[Object(a["J"])(Object(a["g"])("input",{class:"search-form__input-text",type:"text",list:"region",placeholder:"Куда вы собираетесь?","onUpdate:modelValue":e[0]||(e[0]=e=>t.selectedRegion=e)},null,512),[[a["G"],t.selectedRegion]]),u,Object(a["j"])(f,{title:"Поиск",noLeftRadius:!0,onClick:c.setSelectedRegion},null,8,["onClick"])],2)):Object(a["e"])("",!0),Object(a["g"])("div",d,[Object(a["j"])(v,{userName:c.userInfo.name,userImg:t.$baseUrl+"/avatars/"+c.userInfo.avatar,hideName:!c.isDesktop},null,8,["userName","userImg","hideName"]),c.isLogIn?Object(a["e"])("",!0):(Object(a["t"])(),Object(a["f"])("div",p)),c.isLogIn?Object(a["e"])("",!0):(Object(a["t"])(),Object(a["f"])("div",b,[Object(a["j"])(h,{to:"/myroute",class:"dropdown-content__link"},{default:Object(a["I"])(()=>[g]),_:1}),Object(a["j"])(h,{to:"/myfavorites",class:"dropdown-content__link"},{default:Object(a["I"])(()=>[j]),_:1}),Object(a["j"])(h,{to:"/settings",class:"dropdown-content__link"},{default:Object(a["I"])(()=>[m]),_:1}),c.isAdmin?(Object(a["t"])(),Object(a["d"])(h,{key:0,to:"/admin",class:"dropdown-content__link"},{default:Object(a["I"])(()=>[O]),_:1})):Object(a["e"])("",!0),Object(a["g"])("div",{class:"dropdown-content__link",onClick:e[1]||(e[1]=(...t)=>c.setLoginPopup&&c.setLoginPopup(...t))},"Выйти")])),c.isLogIn?(Object(a["t"])(),Object(a["f"])("div",{key:2,class:"login-panel__button-login",onClick:e[2]||(e[2]=(...t)=>c.setLoginPopup&&c.setLoginPopup(...t))},"Войти")):Object(a["e"])("",!0)])])}const f=t=>(Object(a["w"])("data-v-8029825e"),t=t(),Object(a["u"])(),t),v=f(()=>Object(a["g"])("div",{class:"welcome-image__text"},"Создай свой маршрут",-1)),w={class:"places-container"},y={class:"menu__filters"},_=Object(a["i"])("Категория: "),P=Object(a["h"])('<option value="all" selected data-v-8029825e>Все</option><option value="waterfall" data-v-8029825e>Водопады</option><option value="lake" data-v-8029825e>Озера</option><option value="mountain" data-v-8029825e>Горы</option><option value="abonded" data-v-8029825e>Заброшки</option>',5),k=[P],I={class:"gallery"};function R(t,e,s,i,o,c){const n=Object(a["A"])("PlacePreview");return Object(a["t"])(),Object(a["f"])("div",null,[v,Object(a["g"])("div",w,[Object(a["g"])("div",y,[Object(a["g"])("div",null,"Регион: "+Object(a["C"])(c.selectedRegion),1),Object(a["g"])("div",null,[_,Object(a["J"])(Object(a["g"])("select",{class:"places-filter",name:"filter","onUpdate:modelValue":e[0]||(e[0]=t=>o.Pfilter=t)},k,512),[[a["F"],o.Pfilter]])])]),Object(a["g"])("div",I,[(Object(a["t"])(!0),Object(a["f"])(a["a"],null,Object(a["z"])(c.filteredPlaces,t=>(Object(a["t"])(),Object(a["d"])(n,{key:"place + "+t.id,routePoint:t,ShowText:!0},null,8,["routePoint"]))),128))])])])}const $={class:"gallery__item-container"},C=["src"],A={key:0,class:"item__name"};function x(t,e,s,i,o,c){const n=Object(a["A"])("router-link");return Object(a["t"])(),Object(a["d"])(n,{to:{name:"Description",params:{eng:s.routePoint.eng}},class:"gallery__item"},{default:Object(a["I"])(()=>[Object(a["g"])("div",$,[Object(a["g"])("img",{class:"item__image",src:t.$baseUrl+"/img/"+s.routePoint.picture+".jpeg",alt:"avt"},null,8,C),s.ShowText?(Object(a["t"])(),Object(a["f"])("div",A,Object(a["C"])(s.routePoint.name),1)):Object(a["e"])("",!0)])]),_:1},8,["to"])}var D={name:"PlacePreview",props:["routePoint","ShowText"]},T=(s("8222"),s("6b0d")),V=s.n(T);const U=V()(D,[["render",x],["__scopeId","data-v-774eb83f"]]);var S=U,L={components:{PlacePreview:S},data(){return{Pfilter:"all"}},computed:{filteredPlaces(){return"Все"===this.selectedRegion&&"all"===this.Pfilter?this.places:"Все"===this.selectedRegion?this.places.filter(t=>t.tag===this.Pfilter):"all"===this.Pfilter?this.places.filter(t=>t.region===this.selectedRegion):this.places.filter(t=>t.tag===this.Pfilter&&t.region===this.selectedRegion)},selectedRegion(){return this.$store.state.selectedRegion},places(){return this.$store.state.places},isDesktop(){return this.$store.state.isDesktop}},created(){this.$store.dispatch("getPlaces")}};s("2469");const G=V()(L,[["render",R],["__scopeId","data-v-8029825e"]]);var M=G;const z={class:"description-text"},F={class:"input-rewiew-text"},B={class:"raiting"},E=Object(a["i"])("Ваша оценка: "),H=["src","onClick"];function J(t,e,s,i,o,c){const n=Object(a["A"])("Gallery"),r=Object(a["A"])("SavePanel"),l=Object(a["A"])("MyButton"),u=Object(a["A"])("ReviewMessages");return c.currentPlace?(Object(a["t"])(),Object(a["f"])("div",{key:0,class:Object(a["p"])(["description-page",{"description-page-mobile":!c.isDesktop}])},[Object(a["j"])(n,{images:c.currentPictures,vertical:!c.isDesktop},null,8,["images","vertical"]),Object(a["j"])(r,{class:"save-panel"}),Object(a["g"])("div",z,Object(a["C"])(c.currentPlace.description),1),Object(a["g"])("div",{class:Object(a["p"])(["input-rewiew",{"input-rewiew-mobile":!c.isDesktop}])},[Object(a["g"])("div",F,[Object(a["J"])(Object(a["g"])("textarea",{class:"input-rewiew__input",type:"text",placeholder:"Ваш отзыв","onUpdate:modelValue":e[0]||(e[0]=t=>o.inputValue=t),onKeydown:e[1]||(e[1]=Object(a["K"])(Object(a["L"])((...t)=>c.saveRewiew&&c.saveRewiew(...t),["ctrl"]),["enter"]))},null,544),[[a["G"],o.inputValue]]),Object(a["g"])("div",B,[E,(Object(a["t"])(),Object(a["f"])(a["a"],null,Object(a["z"])(5,e=>Object(a["g"])("img",{key:"star"+e,src:t.$baseUrl+"/icons/star.png",alt:"star",class:Object(a["p"])(["icon-star",{"icon-star--hovered":e<=o.starHovered}]),onClick:t=>c.onStarHover(e)},null,10,H)),64))])]),Object(a["j"])(l,{title:"Отправить отзыв",noLeftRadius:c.isDesktop,isDisabled:!this.inputValue||!this.starHovered,onClick:c.saveRewiew},null,8,["noLeftRadius","isDisabled","onClick"])],2),Object(a["j"])(u,{reviews:c.currentReviews,horizontal:!c.isDesktop,isAdmin:c.isAdmin},null,8,["reviews","horizontal","isAdmin"])],2)):Object(a["e"])("",!0)}const N=["disabled"];function K(t,e,s,i,o,c){return Object(a["t"])(),Object(a["f"])("button",{class:Object(a["p"])(["button",{button_disabled:s.isDisabled,"button_no-left-radius":s.noLeftRadius,button_red:s.isRed}]),disabled:s.isDisabled},Object(a["C"])(s.title),11,N)}var W={name:"MyButton",props:["title","isDisabled","noLeftRadius","isRed"]};s("c9cc");const q=V()(W,[["render",K],["__scopeId","data-v-d9082774"]]);var Q=q;const X={class:"rewiew-messages"},Y=["src"],Z=["onClick"];function tt(t,e,s,i,o,c){const n=Object(a["A"])("Title"),r=Object(a["A"])("Avatar");return Object(a["t"])(),Object(a["f"])("div",null,[Object(a["j"])(n,{text:"Отзывы: "+s.reviews.length},null,8,["text"]),Object(a["g"])("div",X,[(Object(a["t"])(!0),Object(a["f"])(a["a"],null,Object(a["z"])(s.reviews,e=>(Object(a["t"])(),Object(a["f"])("div",{class:"rewiew-message",key:e},[Object(a["j"])(r,{userName:e.name,userImg:t.$baseUrl+"/avatars/"+e.avatar},null,8,["userName","userImg"]),Object(a["g"])("div",{class:Object(a["p"])(["review-date",{"review-date-horizontal":s.horizontal}])},[Object(a["i"])(Object(a["C"])(e.createdAt)+" ",1),Object(a["g"])("div",null,[(Object(a["t"])(!0),Object(a["f"])(a["a"],null,Object(a["z"])(e.raiting,e=>(Object(a["t"])(),Object(a["f"])("img",{key:"star"+e,src:t.$baseUrl+"/icons/star.png",alt:"star",class:"icon-star"},null,8,Y))),128))])],2),Object(a["g"])("div",{class:Object(a["p"])(["rewiew-text",{"rewiew-text-horizontal":s.horizontal}])},Object(a["C"])(e.text),3),s.isAdmin?(Object(a["t"])(),Object(a["f"])("div",{key:0,class:"gallery-window__button-close",onClick:t=>c.deleteReview(e.id)},null,8,Z)):Object(a["e"])("",!0)]))),128))])])}const et=["src"],st={key:0,class:"avatar__name"};function at(t,e,s,i,o,c){return s.userImg?(Object(a["t"])(),Object(a["f"])("div",{key:0,class:Object(a["p"])({avatar:!s.hideName,"avatar-vertical":s.vertical})},[Object(a["g"])("img",{class:Object(a["p"])(["avatar__image",{"avatar__image-big":s.big}]),src:s.userImg,alt:"avt"},null,10,et),s.hideName?Object(a["e"])("",!0):(Object(a["t"])(),Object(a["f"])("div",st,Object(a["C"])(s.userName),1))],2)):Object(a["e"])("",!0)}var it={name:"Avatar",props:["userName","userImg","hideName","vertical","big"]};s("82b9");const ot=V()(it,[["render",at],["__scopeId","data-v-0a9f5b7b"]]);var ct=ot;const nt={class:"title"};function rt(t,e,s,i,o,c){return Object(a["t"])(),Object(a["f"])("div",nt,Object(a["C"])(s.text),1)}var lt={name:"MyTitle",props:["text"]};s("3506");const ut=V()(lt,[["render",rt],["__scopeId","data-v-223edf24"]]);var dt=ut,pt={name:"ReviewMessages",props:["reviews","horizontal","isAdmin"],components:{Avatar:ct,Title:dt},computed:{currentPlace(){return this.$store.state.place}},methods:{async deleteReview(t){await this.$store.dispatch("deleteReview",t),await this.$store.dispatch("getReviews",this.currentPlace.id)}}};s("e365");const bt=V()(pt,[["render",tt],["__scopeId","data-v-50bf6406"]]);var gt=bt;const jt=t=>(Object(a["w"])("data-v-357e251a"),t=t(),Object(a["u"])(),t),mt=jt(()=>Object(a["g"])("div",null,"Доступен",-1)),Ot=jt(()=>Object(a["g"])("div",null,"Сложность",-1)),ht={class:"difficalty"},ft=jt(()=>Object(a["g"])("div",null,"Время",-1)),vt=jt(()=>Object(a["g"])("div",null,"Рейтинг",-1)),wt={class:"raiting"},yt=["src"],_t={class:"user-menu"},Pt=Object(a["i"])(" Поделиться "),kt=["src"],It=["href"],Rt=["src","alt"];function $t(t,e,s,i,o,c){const n=Object(a["A"])("AddInRouteButton"),r=Object(a["A"])("ButtonHeart");return Object(a["t"])(),Object(a["f"])("div",{class:Object(a["p"])(["save-panel__info",{"save-panel__info-mobile":!c.isDesktop}])},[mt,Object(a["i"])(" "+Object(a["C"])(c.currentPlace.availability)+" ",1),Ot,Object(a["g"])("div",ht,Object(a["C"])(c.currentDifficulty),1),ft,Object(a["i"])(" "+Object(a["C"])(c.currentTime)+" ",1),vt,Object(a["g"])("div",wt,[(Object(a["t"])(!0),Object(a["f"])(a["a"],null,Object(a["z"])(c.currentRaiting,e=>(Object(a["t"])(),Object(a["f"])("img",{key:"star"+e,src:t.$baseUrl+"/icons/star.png",alt:"star",class:"raiting__star"},null,8,yt))),128))]),Object(a["g"])("div",{class:Object(a["p"])(["save-panel__buttons",{"save-panel__buttons-mobile":!c.isDesktop}])},[Object(a["j"])(n,{placeId:c.currentPlace.id},null,8,["placeId"]),Object(a["j"])(r,{placeId:c.currentPlace.id},null,8,["placeId"]),Object(a["g"])("div",_t,[Pt,Object(a["g"])("img",{src:t.$baseUrl+"/icons/arrow.png",alt:"star",class:"user-menu__arrow"},null,8,kt),Object(a["g"])("div",{class:Object(a["p"])(["user-menu__dropdown-content",{"user-menu__dropdown-content-mobile":!c.isDesktop}])},[(Object(a["t"])(!0),Object(a["f"])(a["a"],null,Object(a["z"])(o.socials,t=>(Object(a["t"])(),Object(a["f"])("a",{key:t.alt,href:t.shareref+this.$route.path,target:"_blank"},[Object(a["g"])("img",{src:t.icon,alt:t.alt,class:"dropdown-content__link"},null,8,Rt)],8,It))),128))],2)])],2)],2)}const Ct="https://marshrutka.su/api",At=[{ref:"https://vk.com",shareref:"http://vkontakte.ru/share.php?url=https://marshrutka.su",icon:Ct+"/icons/vk.png",alt:"vk"},{ref:"https://www.instagram.com",shareref:"https://telegram.me/share/url?url=https://marshrutka.su",icon:Ct+"/icons/instagram.png",alt:"instagram"},{ref:"https://tlgg.ru/likhachev_maxim",shareref:"https://telegram.me/share/url?url=https://marshrutka.su",icon:Ct+"/icons/telegram.png",alt:"telegram"},{ref:"https://wa.me/+79014534841",shareref:"whatsapp://send?text=http://marshrutka.su",icon:Ct+"/icons/whatsapp.png",alt:"whatsapp"}];function xt(t,e,s,i,o,c){const n=Object(a["A"])("MyButton");return Object(a["t"])(),Object(a["d"])(n,{title:c.isAddedInRouteTextButton,isRed:c.isAddedInRoute,onClick:c.addInMyRoute},null,8,["title","isRed","onClick"])}var Dt={name:"AddInRouteButton",props:["placeId"],components:{MyButton:Q},computed:{isAddedInRoute(){return!!this.$store.state.myRoute.find(t=>t.id===this.placeId)},isAddedInRouteTextButton(){return this.isAddedInRoute?"Убрать из маршрута":"Добавить в маршрут"}},methods:{async addInMyRoute(){await this.$store.dispatch("newPointInRoute",this.placeId)}}};const Tt=V()(Dt,[["render",xt]]);var Vt=Tt;const Ut=["src"];function St(t,e,s,i,o,c){return Object(a["t"])(),Object(a["f"])("img",{class:Object(a["p"])(["heart",{"heart-grey":c.isFavorite}]),src:t.$baseUrl+"/icons/heart.png",alt:"heart",onClick:e[0]||(e[0]=(...t)=>c.addInMyFavorites&&c.addInMyFavorites(...t))},null,10,Ut)}var Lt={name:"ButtonHeart",props:["placeId"],computed:{isFavorite(){return!!this.$store.state.myFavorites.find(t=>t.id===this.placeId)}},methods:{async addInMyFavorites(){await this.$store.dispatch("newFavorite",this.placeId)}}};s("6dad");const Gt=V()(Lt,[["render",St],["__scopeId","data-v-87cbb0f6"]]);var Mt=Gt,zt={data(){return{socials:At}},name:"SavePanel",components:{AddInRouteButton:Vt,ButtonHeart:Mt},computed:{currentPlace(){return this.$store.state.place},currentRaiting(){return this.$store.state.raiting},currentDifficulty(){switch(this.$store.state.place.difficulty){case"1":return"Легкая";case"2":return"Средняя";case"3":return"Сложная";default:return"Неопределена"}},currentTime(){return this.$store.state.place.time<1?60*this.$store.state.place.time+" минут":this.$store.state.place.time>=24?this.$store.state.place.time/24+" день":this.$store.state.place.time+" час"},isDesktop(){return this.$store.state.isDesktop}}};s("d755");const Ft=V()(zt,[["render",$t],["__scopeId","data-v-357e251a"]]);var Bt=Ft;const Et=t=>(Object(a["w"])("data-v-40ed9f51"),t=t(),Object(a["u"])(),t),Ht={key:0},Jt=["src","onClick"],Nt=["src"],Kt={class:"gallery-container__item-last-text"},Wt=Et(()=>Object(a["g"])("div",{class:"slider-btn-icon slider-btn-icon-left"},null,-1)),qt=[Wt],Qt=["src"],Xt=Et(()=>Object(a["g"])("div",{class:"slider-btn-icon slider-btn-icon-right"},null,-1)),Yt=[Xt];function Zt(t,e,s,i,o,c){return s.images.length?(Object(a["t"])(),Object(a["f"])("div",Ht,[Object(a["g"])("div",{class:Object(a["p"])(["gallery-container",{"gallery-container-vertical":s.vertical}])},[(Object(a["t"])(),Object(a["f"])(a["a"],null,Object(a["z"])(3,(e,s)=>Object(a["g"])("img",{key:s,src:`${t.$baseUrl}/img/${this.images[s]}`,class:"gallery-container__item",onClick:t=>c.openGalleryPopup(s)},null,8,Jt)),64)),Object(a["g"])("div",{class:"gallery-container__item",onClick:e[0]||(e[0]=t=>c.openGalleryPopup(3))},[Object(a["g"])("img",{src:`${t.$baseUrl}/img/${this.images[3]}`,class:"gallery-container__item gallery-container__item-last-image"},null,8,Nt),Object(a["g"])("div",Kt,Object(a["C"])(c.picturesCount),1)])],2),c.showGallery?(Object(a["t"])(),Object(a["f"])("div",{key:0,class:"background",onClick:e[7]||(e[7]=Object(a["L"])((...t)=>c.closeGalleryPopup&&c.closeGalleryPopup(...t),["self"]))},[Object(a["g"])("div",{class:Object(a["p"])(["gallery-window",{"gallery-window-mobile":!c.isDesktop}]),tabindex:"-1",onKeyup:[e[4]||(e[4]=Object(a["K"])(Object(a["L"])(t=>c.switchGallaryPicture(1),["stop"]),["right"])),e[5]||(e[5]=Object(a["K"])(Object(a["L"])(t=>c.switchGallaryPicture(-1),["stop"]),["left"])),e[6]||(e[6]=Object(a["K"])(Object(a["L"])((...t)=>c.closeGalleryPopup&&c.closeGalleryPopup(...t),["stop"]),["esc"]))],ref:"gallary"},[Object(a["g"])("div",{class:"gallery-window__button-close",onClick:e[1]||(e[1]=(...t)=>c.closeGalleryPopup&&c.closeGalleryPopup(...t))}),Object(a["g"])("div",{class:"gallery-window__slider slider-left",onClick:e[2]||(e[2]=t=>c.switchGallaryPicture(-1))},qt),Object(a["g"])("img",{class:"gallery-window__image",src:t.$baseUrl+c.imageSrc},null,8,Qt),Object(a["g"])("div",{class:"gallery-window__slider slider-right",onClick:e[3]||(e[3]=t=>c.switchGallaryPicture(1))},Yt)],34)])):Object(a["e"])("",!0)])):Object(a["e"])("",!0)}var te=s("5c40"),ee={name:"Gallery",props:["images","vertical"],data(){return{currentPicture:0}},computed:{showGallery(){return this.$store.state.showGalleryPopup},imageSrc(){return"/img/"+this.images[this.currentPicture]},picturesCount(){return"+"+(this.images.length-4)},isDesktop(){return this.$store.state.isDesktop}},methods:{closeGalleryPopup(){this.$store.commit("setGalleryPopup")},switchGallaryPicture(t){this.currentPicture=this.currentPicture+t,this.currentPicture>=this.images.length&&(this.currentPicture=0),this.currentPicture<0&&(this.currentPicture=this.images.length-1)},openGalleryPopup(t){this.currentPicture=t,this.$store.commit("setGalleryPopup"),Object(te["v"])(()=>{this.$refs.gallary.focus()})}}};s("6386");const se=V()(ee,[["render",Zt],["__scopeId","data-v-40ed9f51"]]);var ae=se,ie={components:{MyButton:Q,Gallery:ae,SavePanel:Bt,ReviewMessages:gt},data(){return{inputValue:"",starHovered:""}},computed:{currentRoute(){return Ts.currentRoute.value.params.eng},currentPlace(){return this.$store.state.place},currentReviews(){return this.$store.state.reviews},currentPictures(){return this.$store.state.pictures},isDesktop(){return this.$store.state.isDesktop},isAdmin(){return"Admin"===this.$store.state.user.name}},methods:{onStarHover(t){this.starHovered=t},async saveRewiew(){await this.$store.dispatch("newReview",{text:this.inputValue,raiting:this.starHovered}),await this.$store.dispatch("getReviews",this.currentPlace.id),this.starHovered=this.inputValue=""}},async created(){await this.$store.dispatch("getPlace",this.currentRoute),await this.$store.dispatch("getPictures",this.currentRoute),await this.$store.dispatch("getReviews",this.currentPlace.id)}};s("61b8");const oe=V()(ie,[["render",J],["__scopeId","data-v-09bd40ba"]]);var ce=oe;const ne={class:"registration--window"},re={class:"form"},le={class:"registration--window__form form"},ue={key:0,class:"input-text-wrong"},de={class:"form__password"},pe=["type"],be=["src"],ge={key:1,class:"input-text-wrong"},je={class:"form__password"},me=["type"],Oe=["src"],he={key:2,class:"input-text-wrong"},fe=Object(a["i"])("Уже зарегистрированы? ");function ve(t,e,s,i,o,c){const n=Object(a["A"])("Title"),r=Object(a["A"])("MyButton");return Object(a["t"])(),Object(a["f"])("div",ne,[Object(a["g"])("div",re,[Object(a["j"])(n,{text:"Регистрация"}),Object(a["g"])("div",le,[Object(a["J"])(Object(a["g"])("input",{class:"form__input","onUpdate:modelValue":e[0]||(e[0]=e=>t.name=e),type:"text",placeholder:"Логин"},null,512),[[a["G"],t.name]]),Object(a["J"])(Object(a["g"])("input",{"onUpdate:modelValue":e[1]||(e[1]=e=>t.email=e),class:"form__input",type:"email",placeholder:"E-mail",onInput:e[2]||(e[2]=(...t)=>c.clearEmailValidation&&c.clearEmailValidation(...t)),onBlur:e[3]||(e[3]=(...t)=>c.validateEmail&&c.validateEmail(...t))},null,544),[[a["G"],t.email]]),t.emailValidated&&!c.isValidEmail?(Object(a["t"])(),Object(a["f"])("div",ue,"Введите корректный email ")):Object(a["e"])("",!0),Object(a["g"])("div",de,[Object(a["J"])(Object(a["g"])("input",{class:"form__input","onUpdate:modelValue":e[4]||(e[4]=e=>t.password=e),onInput:e[5]||(e[5]=(...t)=>c.clearPasswordValidation&&c.clearPasswordValidation(...t)),onBlur:e[6]||(e[6]=(...t)=>c.validatePassword&&c.validatePassword(...t)),type:t.typePassword,placeholder:"Пароль"},null,40,pe),[[a["E"],t.password]]),Object(a["g"])("img",{class:"password-eye",src:`${t.$baseUrl}/icons/${t.eyeIconPassword}.png`,onClick:e[7]||(e[7]=(...t)=>c.togglePasswordVisibility&&c.togglePasswordVisibility(...t))},null,8,be)]),t.passwordValidated&&!c.isValidPassword?(Object(a["t"])(),Object(a["f"])("div",ge," Пароль должен быть больше 6 символов и включать латниские буквы и цифры ")):Object(a["e"])("",!0),Object(a["g"])("div",je,[Object(a["J"])(Object(a["g"])("input",{"onUpdate:modelValue":e[8]||(e[8]=e=>t.rePassword=e),class:"form__input",type:t.typePassword,placeholder:"Повторно введите пароль"},null,8,me),[[a["E"],t.rePassword]]),Object(a["g"])("img",{class:"password-eye",onClick:e[9]||(e[9]=(...t)=>c.togglePasswordVisibility&&c.togglePasswordVisibility(...t)),src:`${t.$baseUrl}/icons/${t.eyeIconPassword}.png`},null,8,Oe)]),t.password!==t.rePassword&&t.rePassword.length>6?(Object(a["t"])(),Object(a["f"])("div",he," Пароли не совпадают ")):Object(a["e"])("",!0),Object(a["j"])(r,{title:"Зарегистрироваться",isDisabled:!c.inputIsCorrect,onClick:c.registration},null,8,["isDisabled","onClick"]),Object(a["g"])("p",null,[fe,Object(a["g"])("a",{class:"registration--window__link",onClick:e[10]||(e[10]=(...t)=>c.setLoginPopup&&c.setLoginPopup(...t))},"Войти")])])])])}var we={components:{MyButton:Q,Title:dt},data:()=>({name:"",email:"",password:"",rePassword:"",typePassword:"password",eyeIconPassword:"hide",emailValidationText:"Введите корректный email",emailValidated:!1,passwordValidated:!1}),computed:{isValidEmail(){return this.email.includes("@")&&this.email.includes(".")},isValidPassword(){const t=/[0-9]/,e=/[A-z]/;return this.password.length>6&&this.password.match(t)&&this.password.match(e)||this.password.length<1},inputIsCorrect(){return""!==this.password&&this.password===this.rePassword&&this.isValidEmail&&this.isValidPassword&&""!==this.name}},methods:{validatePassword(){return this.passwordValidated=!0,this.isValidPassword?"":this.passwordValidationText},validateEmail(){return this.emailValidated=!0,this.isValidEmail?"":this.emailValidationText},clearPasswordValidation(){this.passwordValidated=!1},clearEmailValidation(){this.emailValidated=!1},setLoginPopup(){this.$store.commit("setLoginPopup")},togglePasswordVisibility(){"text"===this.typePassword?(this.typePassword="password",this.eyeIconPassword="hide"):(this.typePassword="text",this.eyeIconPassword="show")},async registration(){const t={name:this.name,email:this.email,password:this.password};await this.$store.dispatch("registration",t)}}};s("61c8");const ye=V()(we,[["render",ve],["__scopeId","data-v-00467598"]]);var _e=ye;const Pe={class:"page"},ke={class:"map"};function Ie(t,e,s,i,o,c){const n=Object(a["A"])("ymap-marker"),r=Object(a["A"])("yandex-map"),l=Object(a["A"])("MyButton"),u=Object(a["A"])("RoutePoint");return Object(a["t"])(),Object(a["f"])("div",Pe,[Object(a["g"])("div",ke,[Object(a["j"])(r,{coords:o.coords,zoom:"5",controls:o.controls,onMapWasInitialized:c.mapInitialized},{default:Object(a["I"])(()=>[Object(a["j"])(n,{coords:o.coords,"marker-id":"Старт","hint-content":""},null,8,["coords"])]),_:1},8,["coords","controls","onMapWasInitialized"])]),Object(a["j"])(l,{title:"Постороить маршрут",onClick:c.routeCreate,isDisabled:!c.myRoute.length},null,8,["onClick","isDisabled"]),(Object(a["t"])(!0),Object(a["f"])(a["a"],null,Object(a["z"])(c.myRoute,t=>(Object(a["t"])(),Object(a["d"])(u,{key:t.id,routePoint:t},null,8,["routePoint"]))),128))])}const Re={class:"route-point__preview"},$e=["src"],Ce={class:"route-point__name"},Ae={key:0,class:"route-point__info"},xe={class:"route-point__time"},De={class:"route-point__time"},Te={class:"route-point__time"},Ve={class:"route-point__buttons"},Ue={class:"route-point__description"},Se={key:0,class:"route-point__info"},Le={class:"route-point__time"},Ge={class:"route-point__time"},Me={class:"route-point__time"};function ze(t,e,s,i,o,c){const n=Object(a["A"])("AddInRouteButton"),r=Object(a["A"])("ButtonHeart"),l=Object(a["A"])("PlacePreview");return Object(a["t"])(),Object(a["f"])("div",null,[Object(a["g"])("div",{class:Object(a["p"])(["route-point",{"route-point--full-size":o.isFullSize,"route-point-mobile":!c.isDesktop}]),onClick:e[0]||(e[0]=(...t)=>c.toggleSize&&c.toggleSize(...t))},[Object(a["g"])("div",{class:Object(a["p"])(["route-point__container",{"route-point__container-desktop":c.isDesktop}])},[Object(a["g"])("div",Re,[Object(a["g"])("img",{src:t.$baseUrl+"/icons/arrow.png",alt:"star",class:Object(a["p"])(["route-point__arrow",{"route-point__arrow-down":o.isFullSize}])},null,10,$e),Object(a["g"])("div",Ce,Object(a["C"])(s.routePoint.name),1),c.isDesktop?(Object(a["t"])(),Object(a["f"])("div",Ae,[Object(a["g"])("div",xe,Object(a["C"])(s.routePoint.time),1),Object(a["g"])("div",De,Object(a["C"])(s.routePoint.availability),1),Object(a["g"])("div",Te,Object(a["C"])(s.routePoint.difficulty),1)])):Object(a["e"])("",!0)]),Object(a["g"])("div",Ve,[Object(a["j"])(n,{placeId:s.routePoint.id},null,8,["placeId"]),Object(a["j"])(r,{placeId:s.routePoint.id},null,8,["placeId"])])],2),Object(a["j"])(l,{routePoint:s.routePoint},null,8,["routePoint"]),Object(a["g"])("div",null,[Object(a["g"])("div",Ue,Object(a["C"])(s.routePoint.description),1),c.isDesktop?Object(a["e"])("",!0):(Object(a["t"])(),Object(a["f"])("div",Se,[Object(a["g"])("div",Le,Object(a["C"])(s.routePoint.time),1),Object(a["g"])("div",Ge,Object(a["C"])(s.routePoint.availability),1),Object(a["g"])("div",Me,Object(a["C"])(s.routePoint.difficulty),1)]))])],2)])}var Fe={components:{AddInRouteButton:Vt,PlacePreview:S,ButtonHeart:Mt},props:["routePoint","FullSize","ButtonsReverse"],data(){return{isFullSize:this.FullSize}},computed:{isDesktop(){return this.$store.state.isDesktop}},methods:{toggleSize(){this.isFullSize=!this.isFullSize}}};s("8b90");const Be=V()(Fe,[["render",ze],["__scopeId","data-v-76f15642"]]);var Ee=Be,He=s("bc3a"),Je=s.n(He),Ne=(s("0804"),s("e30e")),Ke=s.n(Ne);const We={ERROR:"rgb(255, 98, 98)",SUCCCES:"rgb(0, 212, 141)",WARNING:"rgb(234, 206, 127)"},qe=(t,e,s,a)=>{Ke()({text:e,duration:3e3,newWindow:!0,close:!0,gravity:s,position:a,stopOnFocus:!0,style:{background:t,"border-radius":"10px"},onClick:function(){}}).showToast()},Qe=t=>{t.interceptors.request.use(t=>{var e;const s=null===(e=JSON.parse(localStorage.getItem("userData")))||void 0===e?void 0:e.token;return s&&(t.headers["Authorization"]="Bearer "+s),t},t=>Promise.reject(t));let e=null;t.interceptors.response.use((function(t){return t}),async s=>{const a=s.config;if(401===s.response.status){if(e)await e;else{var i;e=t.post("refresh",{token:null===(i=JSON.parse(localStorage.getItem("userData")))||void 0===i?void 0:i.refreshToken});const s=await e;e=null,localStorage.setItem("userData",JSON.stringify({token:s.data.accessToken,refreshToken:s.data.refreshToken}))}return t(a)}403===s.response.status&&s.response.data&&qe(We.ERROR,s.response.data.message,"bottom","left"),qe(We.ERROR,s.response.data.message,"bottom","left")})},Xe=Je.a.create({baseURL:"https://marshrutka.su/api",headers:{"Content-Type":"application/json"}});Qe(Xe);let Ye=null;var Ze={components:{RoutePoint:Ee,MyButton:Q},data(){return{coords:[54.82896654088406,39.8318938227539],controls:["default"]}},computed:{user(){return this.$store.state.user},myRoute(){return this.$store.state.myRoute},routeCoords(){return this.$store.state.myRoute.map(t=>t.coords)}},methods:{async getMyOptimalRoute(){await this.$store.dispatch("getOptimalRoute")},async routeCreate(){try{await Xe.get("optimalroute?id="+this.$store.state.user.id)}catch(t){console.log("Ошибка HTTP: "+t.response.data.message)}},async routeCreate1(){const t=this.routeCoords;for(let e=0;e<t.length;e++)for(let s=e+1;s<t.length;s++)await this.newRoute([t[e],t[s]])},async newRoute(t){const e=new window.ymaps.multiRouter.MultiRoute({referencePoints:t},{editorDrawOver:!1,wayPointDraggable:!1,viaPointDraggable:!1,routeStrokeColor:"000088",routeActiveStrokeColor:"ff0000",pinIconFillColor:"ff0000",boundsAutoApply:!0,zoomMargin:30});e.model.events.add("requestsuccess",(function(){const s=e.getActiveRoute(),a=t[0],i=t[1],o=s.properties.get("distance").value,c=s.properties.get("duration").value;console.log(a),console.log(i),console.log(o),console.log(c)}))},async findMe(){const t=window.ymaps.geolocation.get();return t.then((function(t){return Ye.geoObjects.add(t.geoObjects),t.geoObjects.position}))},async addInRouteMap(t,e,s,a){const i=await Xe.post("routemap",{place1:t,place2:e,distance:s,duration:a}),o=await i.json();console.log(o.message)},mapInitialized(t){Ye=t}}};s("67f4");const ts=V()(Ze,[["render",Ie],["__scopeId","data-v-5bcde975"]]);var es=ts;const ss={class:"favorite-page"};function as(t,e,s,i,o,c){const n=Object(a["A"])("Title"),r=Object(a["A"])("RoutePoint");return Object(a["t"])(),Object(a["f"])("div",ss,[Object(a["j"])(n,{text:c.titleText},null,8,["text"]),(Object(a["t"])(!0),Object(a["f"])(a["a"],null,Object(a["z"])(c.myFavorites,t=>(Object(a["t"])(),Object(a["d"])(r,{key:t,routePoint:t,FullSize:!1,ButtonsReverse:!0},null,8,["routePoint"]))),128))])}var is={components:{RoutePoint:Ee,Title:dt},computed:{myFavorites(){return this.$store.state.myFavorites},titleText(){return 0===this.myFavorites.length?"Пока здесь пусто":"Избранное: "+this.myFavorites.length}}};s("62c1");const os=V()(is,[["render",as],["__scopeId","data-v-e54dfb36"]]);var cs=os;const ns=t=>(Object(a["w"])("data-v-43799534"),t=t(),Object(a["u"])(),t),rs={class:"registration--window"},ls={class:"form"},us=ns(()=>Object(a["g"])("label",{class:"form__input--btn",for:"file"},"Изменить аватар",-1));function ds(t,e,s,i,o,c){const n=Object(a["A"])("Title"),r=Object(a["A"])("Avatar"),l=Object(a["A"])("MyButton");return Object(a["t"])(),Object(a["f"])("div",rs,[Object(a["j"])(n,{text:"Настройки"}),Object(a["g"])("div",ls,[c.user.avatar?(Object(a["t"])(),Object(a["d"])(r,{key:0,userName:c.user.name,userImg:c.avatarSrc,vertical:!0,hideName:!0,big:!0},null,8,["userName","userImg"])):Object(a["e"])("",!0),Object(a["g"])("input",{class:"form__input--file",type:"file",id:"file",ref:"file",accept:"image/jpeg",onChange:e[0]||(e[0]=t=>c.handleFilesUploads())},null,544),us,Object(a["J"])(Object(a["g"])("input",{class:"form__input-text","onUpdate:modelValue":e[1]||(e[1]=e=>t.oldEmail=e),type:"email",placeholder:"Старый e-mail"},null,512),[[a["G"],t.oldEmail]]),Object(a["J"])(Object(a["g"])("input",{class:"form__input-text","onUpdate:modelValue":e[2]||(e[2]=e=>t.newEmail=e),type:"email",placeholder:"Новый e-mail"},null,512),[[a["G"],t.newEmail]]),Object(a["J"])(Object(a["g"])("input",{class:"form__input-text","onUpdate:modelValue":e[3]||(e[3]=e=>t.oldPassword=e),type:"password",placeholder:"Старый пароль"},null,512),[[a["G"],t.oldPassword]]),Object(a["J"])(Object(a["g"])("input",{class:"form__input-text","onUpdate:modelValue":e[4]||(e[4]=e=>t.newPassword=e),type:"password",placeholder:"Новый пароль"},null,512),[[a["G"],t.newPassword]]),Object(a["j"])(l,{title:"Применить изменения",onClick:c.settingsAccept,isDisabled:!(t.oldEmail||t.oldPassword||t.file)},null,8,["onClick","isDisabled"])])])}var ps={components:{MyButton:Q,Avatar:ct,Title:dt},data:()=>({oldEmail:"",newEmail:"",oldPassword:"",newPassword:"",file:"",image:""}),methods:{handleFilesUploads(){this.file=this.$refs.file.files[0],this.readImage()},async settingsAccept(){const t=new FormData;t.append("name",this.user.name),t.append("oldEmail",this.oldEmail),t.append("oldPassword",this.oldPassword),t.append("email",this.newEmail),t.append("password",this.newPassword),t.append("image",this.file),await Xe.post("/settings",t),this.oldEmail=this.newEmail=this.oldPassword=this.newPassword=this.file=""},readImage(){const t=new FileReader;t.addEventListener("load",t=>{this.image=t.target.result}),t.readAsDataURL(this.file)}},computed:{user(){return this.$store.state.user},avatarSrc(){return this.image||"https://marshrutka.su/api/avatars/"+this.user.avatar}}};s("4977");const bs=V()(ps,[["render",ds],["__scopeId","data-v-43799534"]]);var gs=bs;const js=t=>(Object(a["w"])("data-v-74581405"),t=t(),Object(a["u"])(),t),ms={class:"registration--window"},Os={class:"form"},hs=["value"],fs=Object(a["h"])('<datalist id="tags" data-v-74581405><option value="waterfall" data-v-74581405>Водопады</option><option value="lake" data-v-74581405>Озера</option><option value="mountain" data-v-74581405>Горы</option><option value="abonded" data-v-74581405>Заброшки</option></datalist>',1),vs=js(()=>Object(a["g"])("datalist",{id:"region"},[Object(a["g"])("option",{value:"Абхазия"},"Abkhazia"),Object(a["g"])("option",{value:"Сочи"},"Sochi"),Object(a["g"])("option",{value:"Красная Поляна"},"Krasnaia Polyana")],-1)),ws=js(()=>Object(a["g"])("datalist",{id:"difficulty"},[Object(a["g"])("option",{value:"1"},"Легкий"),Object(a["g"])("option",{value:"2"},"Средний"),Object(a["g"])("option",{value:"3"},"Сложный")],-1)),ys={class:"form__input--month"},_s=js(()=>Object(a["g"])("div",null,"Доступность",-1)),Ps={class:"gallery"},ks=["src","onClick"],Is={key:0,for:"file",class:"gallery-container__item"};function Rs(t,e,s,i,o,c){const n=Object(a["A"])("Title"),r=Object(a["A"])("MyButton");return Object(a["t"])(),Object(a["f"])("div",ms,[Object(a["g"])("div",Os,[Object(a["j"])(n,{text:"Изменить обьекты"}),Object(a["J"])(Object(a["g"])("select",{class:"form__input",name:"places",id:"places","onUpdate:modelValue":e[0]||(e[0]=e=>t.place=e),onChange:e[1]||(e[1]=(...t)=>c.getPictures&&c.getPictures(...t))},[(Object(a["t"])(!0),Object(a["f"])(a["a"],null,Object(a["z"])(this.places,t=>(Object(a["t"])(),Object(a["f"])("option",{key:t.id,value:t},Object(a["C"])(t.name),9,hs))),128))],544),[[a["F"],t.place]]),Object(a["J"])(Object(a["g"])("input",{class:"form__input","onUpdate:modelValue":e[2]||(e[2]=e=>t.place.eng=e),type:"text",placeholder:"Название объекта на английском"},null,512),[[a["G"],t.place.eng]]),Object(a["J"])(Object(a["g"])("input",{class:"form__input","onUpdate:modelValue":e[3]||(e[3]=e=>t.place.name=e),type:"text",placeholder:"Название объекта на русском"},null,512),[[a["G"],t.place.name]]),Object(a["J"])(Object(a["g"])("input",{class:"form__input",type:"text",list:"tags",placeholder:"tag","onUpdate:modelValue":e[4]||(e[4]=e=>t.place.tag=e)},null,512),[[a["G"],t.place.tag]]),fs,Object(a["J"])(Object(a["g"])("input",{class:"form__input",type:"text",list:"region",placeholder:"region","onUpdate:modelValue":e[5]||(e[5]=e=>t.place.region=e)},null,512),[[a["G"],t.place.region]]),vs,Object(a["J"])(Object(a["g"])("input",{class:"form__input",type:"text",placeholder:"city","onUpdate:modelValue":e[6]||(e[6]=e=>t.place.city=e)},null,512),[[a["G"],t.place.city]]),Object(a["J"])(Object(a["g"])("input",{class:"form__input",type:"text",list:"difficulty",placeholder:"сложность","onUpdate:modelValue":e[7]||(e[7]=e=>t.place.difficulty=e)},null,512),[[a["G"],t.place.difficulty]]),ws,Object(a["g"])("div",ys,[_s,Object(a["J"])(Object(a["g"])("input",{class:"form__input",type:"text","onUpdate:modelValue":e[8]||(e[8]=e=>t.place.availability=e)},null,512),[[a["G"],t.place.availability]])]),Object(a["J"])(Object(a["g"])("input",{class:"form__input",type:"text",placeholder:"время","onUpdate:modelValue":e[9]||(e[9]=e=>t.place.time=e)},null,512),[[a["G"],t.place.time]]),Object(a["J"])(Object(a["g"])("textarea",{class:"input-rewiew__input",type:"text",placeholder:"Описание","onUpdate:modelValue":e[10]||(e[10]=e=>t.place.description=e)},null,512),[[a["G"],t.place.description]]),Object(a["J"])(Object(a["g"])("input",{class:"form__input",type:"text",placeholder:"43.434954,40.442885","onUpdate:modelValue":e[11]||(e[11]=e=>t.place.coords=e)},null,512),[[a["G"],t.place.coords]]),Object(a["g"])("div",Ps,[(Object(a["t"])(!0),Object(a["f"])(a["a"],null,Object(a["z"])(c.currentPictures,e=>(Object(a["t"])(),Object(a["f"])("img",{key:e,src:`${t.$baseUrl}/img/${e}`,class:"gallery-container__item",onClick:t=>c.deletePlaceImage(e)},null,8,ks))),128)),Object(a["g"])("input",{class:"new-picture",type:"file",id:"file",ref:"file",accept:"image/jpeg",onChange:e[12]||(e[12]=t=>c.addPlaceImage())},null,544),t.place.eng?(Object(a["t"])(),Object(a["f"])("label",Is,"Добавить фото")):Object(a["e"])("",!0)]),Object(a["j"])(r,{title:"Добавить Обьект",onClick:c.addNewPlace},null,8,["onClick"]),Object(a["j"])(r,{title:"Сохранить Обьект",onClick:c.editPlace},null,8,["onClick"]),Object(a["j"])(r,{title:"Удалить Обьект",onClick:c.deletePlace},null,8,["onClick"])])])}var $s={components:{MyButton:Q,Title:dt},data:()=>({place:{}}),computed:{places(){return this.$store.state.places},currentPictures(){return this.$store.state.pictures}},methods:{async addNewPlace(){await Xe.post("place",{place:this.place})},async editPlace(){await Xe.patch("place",{place:this.place})},async deletePlace(){await Xe.delete("place",{params:{id:this.place.id}})},async getPictures(){await this.$store.dispatch("getPictures",this.place.eng)},async addPlaceImage(){const t=new FormData;t.append("eng",this.place.eng),t.append("image",this.$refs.file.files[0]),await Xe.post("pictures",t,{headers:{"Content-Type":"multipart/form-data"}}),await this.$store.dispatch("getPictures",this.place.eng)},async deletePlaceImage(t){try{await Xe.delete("pictures",{params:{image:t}}),await this.$store.dispatch("getPictures",this.place.eng)}catch(e){console.log("Ошибка HTTP: "+e)}}},created(){this.$store.dispatch("getPlaces"),this.$store.state.pictures=[]}};s("6d7f");const Cs=V()($s,[["render",Rs],["__scopeId","data-v-74581405"]]);var As=Cs,xs=s("6c02");const Ds=[{path:"/",name:"MyPlaces",component:M},{path:"/:eng",name:"Description",component:ce},{path:"/registration",name:"Registration",component:_e},{path:"/myroute",name:"MyRoute",component:es},{path:"/myfavorites",name:"MyFavorites",component:cs},{path:"/settings",name:"Settings",component:gs},{path:"/admin",name:"Admin",component:As}],Ts=Object(xs["a"])({history:Object(xs["b"])(),routes:Ds});Ts.beforeEach(()=>{window.scroll(0,0)});var Vs={name:"Header",components:{MyButton:Q,Avatar:ct},data:()=>({selectedRegion:""}),computed:{user(){return this.$store.state.user},isLogIn(){return!Object.keys(this.user).length},userInfo(){return{name:this.user.name?this.user.name:"Неопознанный турист",avatar:this.user.avatar?this.user.avatar:"tourist.png"}},isAdmin(){return"Admin"===this.user.name},isDesktop(){return this.$store.state.isDesktop},isStartPage(){return"/"===this.$route.fullPath}},methods:{setLoginPopup(){this.isLogIn?this.$store.commit("setLoginPopup"):(this.$store.dispatch("logOut"),Ts.push({name:"MyPlaces"}))},setSelectedRegion(){this.$store.commit("setselectedRegion",this.selectedRegion),Ts.push({name:"MyPlaces"}),this.selectedRegion=""}}};s("8609");const Us=V()(Vs,[["render",h],["__scopeId","data-v-7134d034"]]);var Ss=Us;const Ls={class:"footer"},Gs={href:"tel:+79014534841",class:"contacts-typical__item"},Ms=["src"],zs=Object(a["i"])(" +79014534841 "),Fs={href:"mailto:macs0007@mail.ru",class:"contacts-typical__item"},Bs=["src"],Es=Object(a["i"])(" macs0007@mail.ru "),Hs={class:"footer__contacts-social"},Js=["href"],Ns=["src","alt"],Ks=Object(a["i"])("© 2022, Marshrutka Limited Sochifornia");function Ws(t,e,s,i,o,c){const n=Object(a["A"])("router-link");return Object(a["t"])(),Object(a["f"])("div",Ls,[Object(a["g"])("div",{class:Object(a["p"])(["footer__contacts-typical",{"footer__contacts-typical-mobile":!c.isDesktop}])},[Object(a["g"])("a",Gs,[Object(a["g"])("img",{src:t.$baseUrl+"/icons/russia-flag.png",alt:"tel"},null,8,Ms),zs]),Object(a["g"])("a",Fs,[Object(a["g"])("img",{src:t.$baseUrl+"/icons/mail.png",alt:"mail"},null,8,Bs),Es])],2),Object(a["g"])("div",Hs,[(Object(a["t"])(!0),Object(a["f"])(a["a"],null,Object(a["z"])(o.socials,t=>(Object(a["t"])(),Object(a["f"])("a",{key:t.alt,href:t.ref},[Object(a["g"])("img",{src:t.icon,alt:t.alt,class:"contacts-social__item"},null,8,Ns)],8,Js))),128))]),Object(a["j"])(n,{to:"/",class:Object(a["p"])(["footer__logo-name",{"footer__logo-name-mobile":!c.isDesktop}])},{default:Object(a["I"])(()=>[Ks]),_:1},8,["class"])])}var qs={data(){return{socials:At}},computed:{isDesktop(){return this.$store.state.isDesktop}}};s("995b");const Qs=V()(qs,[["render",Ws],["__scopeId","data-v-4f32a409"]]);var Xs=Qs;const Ys={class:"form"},Zs={class:"form__input-text",ref:"name",type:"text",placeholder:"Логин",tabindex:"-1"},ta={class:"form__input-text",ref:"password",type:"password",placeholder:"Пароль"},ea=Object(a["i"])("Впервые у нас? "),sa=Object(a["i"])("Зарегистрируйтесь");function aa(t,e,s,i,o,c){const n=Object(a["A"])("Title"),r=Object(a["A"])("MyButton"),l=Object(a["A"])("router-link");return Object(a["t"])(),Object(a["f"])("div",{class:"background",onClick:e[3]||(e[3]=Object(a["L"])((...t)=>c.setLoginPopup&&c.setLoginPopup(...t),["self"]))},[Object(a["g"])("div",{class:Object(a["p"])(["login-window",{"login-window-mobile":!c.isDesktop}]),onKeyup:[e[1]||(e[1]=Object(a["K"])(Object(a["L"])((...t)=>c.setLoginPopup&&c.setLoginPopup(...t),["stop"]),["esc"])),e[2]||(e[2]=Object(a["K"])(Object(a["L"])((...t)=>c.login&&c.login(...t),["stop"]),["enter"]))]},[Object(a["j"])(n,{text:"Вход"}),Object(a["g"])("div",{class:"button-close",onClick:e[0]||(e[0]=(...t)=>c.setLoginPopup&&c.setLoginPopup(...t))}),Object(a["g"])("div",Ys,[Object(a["g"])("input",Zs,null,512),Object(a["g"])("input",ta,null,512),Object(a["j"])(r,{onClick:c.login,title:"Войти"},null,8,["onClick"]),Object(a["g"])("div",null,[ea,Object(a["j"])(l,{to:"/registration",onClick:c.setLoginPopup},{default:Object(a["I"])(()=>[sa]),_:1},8,["onClick"])])])],34)])}var ia={name:"LoginPopup",components:{MyButton:Q,Title:dt},computed:{isDesktop(){return this.$store.state.isDesktop}},methods:{setLoginPopup(){this.$store.commit("setLoginPopup")},login(){const t={name:this.$refs.name.value,password:this.$refs.password.value};this.$store.dispatch("login",t)}},mounted(){this.$refs.name.focus()}};s("3166");const oa=V()(ia,[["render",aa],["__scopeId","data-v-2edf1e3d"]]);var ca=oa;const na=()=>{const t=750;return window.innerWidth>=t};var ra={name:"App",components:{Header:Ss,Footer:Xs,LoginPopup:ca},computed:{isDesktop(){return this.$store.state.isDesktop}},mounted(){localStorage.getItem("userData")?this.$store.dispatch("getUser"):this.$store.dispatch("logOut"),this.$store.commit("setIsDesktop",na()),window.addEventListener("resize",()=>{this.$store.commit("setIsDesktop",na())})}};s("1bb1");const la=V()(ra,[["render",o]]);var ua=la,da=(s("13d5"),s("5502"));const pa=Object(da["a"])({state(){return{selectedRegion:"Все",showLoginPopup:!1,showGalleryPopup:!1,myRoute:[],myFavorites:[],places:[],place:{},reviews:[],raiting:null,pictures:[],user:{},isDesktop:!0}},actions:{logOut(){localStorage.removeItem("userData"),this.state.user={},this.state.myRoute=[],this.state.myFavorites=[]},async getPlaces(){try{const t=await Xe.get("places");this.commit("setPlaces",t.data)}catch(t){console.log("Ошибка HTTP: "+t)}},async getPlace(t,e){try{const t=await Xe.get("place?id="+e);this.commit("setPlace",t.data)}catch(s){console.log("Ошибка HTTP: "+s)}},async getReviews(t,e){try{const t=await Xe.get("review",{params:{id:e}});this.commit("setReviews",t.data)}catch(s){console.log("Ошибка HTTP: "+s)}},async getPictures(t,e){try{const t=await Xe.get("pictures",{params:{id:e}});this.commit("setPictures",t.data)}catch(s){console.log("Ошибка HTTP: "+s)}},async getFavorites(){try{const t=await Xe.get("favorite",{params:{id:this.state.user.id}});this.commit("setmyFavorites",t.data)}catch(t){console.log("Ошибка HTTP: "+t)}},async getRoute(){try{const t=await Xe.get("route",{params:{id:this.state.user.id}});this.commit("setmyRoute",t.data)}catch(t){console.log("Ошибка HTTP: "+t)}},async getUser(){try{const t=await Xe.get("user");this.commit("setUser",t.data.user),this.dispatch("getFavorites"),this.dispatch("getRoute")}catch(t){console.log("Ошибка HTTP: "+t)}},async newReview(t,e){try{await Xe.post("review",{text:e.text,raiting:e.raiting,userId:this.state.user.id,placeId:this.state.place.id})}catch(s){console.log("Ошибка HTTP: "+s)}},async deleteReview(t,e){try{await Xe.delete("review",{params:{id:e}})}catch(s){console.log("Ошибка HTTP: "+s)}},async newFavorite(t,e){try{const t=await Xe.post("favorite",{userId:this.state.user.id,placeId:e});t&&await this.dispatch("getFavorites")}catch(s){console.log("Ошибка HTTP: "+s)}},async newPointInRoute(t,e){try{const t=await Xe.post("route",{userId:this.state.user.id,placeId:e});t&&await this.dispatch("getRoute")}catch(s){console.log("Ошибка HTTP: "+s)}},async login(t,e){try{const t=await Xe.post("login",{name:e.name,password:e.password});localStorage.setItem("userData",JSON.stringify({token:t.data.token,refreshToken:t.data.refreshToken})),this.commit("setUser",t.data.user),this.commit("setLoginPopup")}catch(s){console.log("Ошибка HTTP: "+s)}},async registration(t,e){try{const t=await Xe.post("registration",{name:e.name,password:e.password,email:e.email});localStorage.setItem("userData",JSON.stringify({token:t.data.token,refreshToken:t.data.refreshToken})),this.commit("setUser",t.data.user),Ts.push({name:"MyPlaces"})}catch(s){console.log("Ошибка HTTP: "+s)}}},mutations:{setselectedRegion(t,e){t.selectedRegion=e},setLoginPopup(t){t.showLoginPopup=!t.showLoginPopup},setGalleryPopup(t){t.showGalleryPopup=!t.showGalleryPopup},setCurrentPicture(t,e){t.currentPicture=e},setmyRoute(t,e){t.myRoute=e},setMyOptimalRoute(t,e){t.myOptimalRoute=e},setmyFavorites(t,e){t.myFavorites=e},setPlaces(t,e){t.places=e},setPlace(t,e){t.place=e},setUser(t,e){t.user=e},setReviews(t,e){t.reviews=e,t.raiting=Math.round(e.reduce((t,e)=>t+e.raiting,0)/e.length)},setPictures(t,e){t.pictures=e},setIsDesktop(t,e){t.isDesktop=e}}});var ba=s("f5ce");const ga={apiKey:"378194c2-3ccf-497c-8950-da741a79edd2",lang:"ru_RU",coordorder:"latlong",enterprise:!1,version:"2.1"},ja=Object(a["c"])(ua).use(Ts).use(pa).use(ba["a"],ga);ja.config.globalProperties.$baseUrl="https://marshrutka.su/api",ja.mount("#app")},"5d8f":function(t,e,s){},"61b8":function(t,e,s){"use strict";s("bbc1")},"61c8":function(t,e,s){"use strict";s("f4ab")},"62c1":function(t,e,s){"use strict";s("e286")},6386:function(t,e,s){"use strict";s("110f")},"67f4":function(t,e,s){"use strict";s("5d8f")},"6a89":function(t,e,s){},"6d7f":function(t,e,s){"use strict";s("c6bb")},"6dad":function(t,e,s){"use strict";s("bae9")},"72d1":function(t,e,s){},8222:function(t,e,s){"use strict";s("ec0f")},"82b9":function(t,e,s){"use strict";s("d06e")},8609:function(t,e,s){"use strict";s("5458")},"86e1":function(t,e,s){},"8b90":function(t,e,s){"use strict";s("32ee")},"995b":function(t,e,s){"use strict";s("72d1")},bae9:function(t,e,s){},bbc1:function(t,e,s){},c14f:function(t,e,s){},c6bb:function(t,e,s){},c9cc:function(t,e,s){"use strict";s("0b98")},cd5c:function(t,e,s){},d06e:function(t,e,s){},d755:function(t,e,s){"use strict";s("c14f")},e286:function(t,e,s){},e365:function(t,e,s){"use strict";s("3b46")},ec0f:function(t,e,s){},f4ab:function(t,e,s){},fc4e:function(t,e,s){}});
//# sourceMappingURL=app.a74f7faf.js.map