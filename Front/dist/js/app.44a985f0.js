(function(e){function t(t){for(var a,o,r=t[0],n=t[1],l=t[2],d=0,p=[];d<r.length;d++)o=r[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&p.push(i[o][0]),i[o]=0;for(a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);u&&u(t);while(p.length)p.shift()();return c.push.apply(c,l||[]),s()}function s(){for(var e,t=0;t<c.length;t++){for(var s=c[t],a=!0,r=1;r<s.length;r++){var n=s[r];0!==i[n]&&(a=!1)}a&&(c.splice(t--,1),e=o(o.s=s[0]))}return e}var a={},i={app:0},c=[];function o(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=a,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(s,a,function(t){return e[t]}.bind(null,a));return s},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],n=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var u=n;c.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"0b45":function(e,t,s){"use strict";s("367d")},"202a":function(e,t,s){},2093:function(e,t,s){"use strict";s("696b")},"2a62":function(e,t,s){},"2b4b":function(e,t,s){"use strict";s("b9b0")},3005:function(e,t,s){"use strict";s("cad8")},"367d":function(e,t,s){},"3b3b":function(e,t,s){"use strict";s("419c")},"419c":function(e,t,s){},"442e":function(e,t,s){"use strict";s("d018")},"47e0":function(e,t,s){"use strict";s("50eb")},"4ece":function(e,t,s){"use strict";s("e6b5")},"4f92":function(e,t,s){"use strict";s("ce82")},"50eb":function(e,t,s){},"56d7":function(e,t,s){"use strict";s.r(t),s.d(t,"settings",(function(){return ha}));var a=s("7a23");function i(e,t,s,i,c,o){const r=Object(a["A"])("Header"),n=Object(a["A"])("router-view"),l=Object(a["A"])("LoginPopup"),u=Object(a["A"])("Footer");return Object(a["t"])(),Object(a["f"])("div",null,[Object(a["j"])(r),Object(a["j"])(n),this.$store.state.showLoginPopup?(Object(a["t"])(),Object(a["d"])(l,{key:0})):Object(a["e"])("",!0),Object(a["j"])(u)])}const c=e=>(Object(a["w"])("data-v-38f0651e"),e=e(),Object(a["u"])(),e),o={class:"header"},r=["src"],n=c(()=>Object(a["g"])("div",{class:"logo__name"},"Marshrutka",-1)),l=Object(a["h"])('<datalist id="region" data-v-38f0651e><option value="Абхазия" data-v-38f0651e>Abkhazia</option><option value="Сочи" data-v-38f0651e>Sochi</option><option value="Красная Поляна" data-v-38f0651e>Krasnaia Polyana</option><option value="Все" data-v-38f0651e>All</option></datalist>',1),u={class:"user-menu"},d={key:0,class:"user-menu__arrow"},p={key:1,class:"user-menu__dropdown-content"},b=Object(a["i"])("Мой маршрут"),j=Object(a["i"])("Избранное"),g=Object(a["i"])("Настройки"),O=Object(a["i"])("Редактировать");function m(e,t,s,i,c,m){const h=Object(a["A"])("router-link"),v=Object(a["A"])("MyButton"),f=Object(a["A"])("Avatar");return Object(a["t"])(),Object(a["f"])("div",o,[Object(a["j"])(h,{to:"/",class:"logo"},{default:Object(a["I"])(()=>[Object(a["g"])("img",{class:"logo__icon",src:e.$baseUrl+"/icons/logo.svg",alt:"Маршрутка"},null,8,r),n]),_:1}),m.isStartPage||m.isDesktop?(Object(a["t"])(),Object(a["f"])("div",{key:0,class:Object(a["p"])(["search-form",{"search-form-mobile":!m.isDesktop}])},[Object(a["J"])(Object(a["g"])("input",{class:"search-form__input-text",type:"text",list:"region",placeholder:"Куда вы собираетесь?","onUpdate:modelValue":t[0]||(t[0]=t=>e.selectedRegion=t)},null,512),[[a["G"],e.selectedRegion]]),l,Object(a["j"])(v,{title:"Поиск",noLeftRadius:!0,onClick:m.setSelectedRegion},null,8,["onClick"])],2)):Object(a["e"])("",!0),Object(a["g"])("div",u,[Object(a["j"])(f,{userName:m.userInfo.name,userImg:e.$baseUrl+"/avatars/"+m.userInfo.avatar,hideName:!m.isDesktop},null,8,["userName","userImg","hideName"]),m.isLogIn?(Object(a["t"])(),Object(a["f"])("div",d)):Object(a["e"])("",!0),m.isLogIn?(Object(a["t"])(),Object(a["f"])("div",p,[Object(a["j"])(h,{to:"/myroute",class:"dropdown-content__link"},{default:Object(a["I"])(()=>[b]),_:1}),Object(a["j"])(h,{to:"/myfavorites",class:"dropdown-content__link"},{default:Object(a["I"])(()=>[j]),_:1}),Object(a["j"])(h,{to:"/settings",class:"dropdown-content__link"},{default:Object(a["I"])(()=>[g]),_:1}),m.isAdmin?(Object(a["t"])(),Object(a["d"])(h,{key:0,to:"/admin",class:"dropdown-content__link"},{default:Object(a["I"])(()=>[O]),_:1})):Object(a["e"])("",!0),Object(a["g"])("div",{class:"dropdown-content__link",onClick:t[1]||(t[1]=(...e)=>m.setLoginPopup&&m.setLoginPopup(...e))},"Выйти")])):Object(a["e"])("",!0),m.isLogIn?Object(a["e"])("",!0):(Object(a["t"])(),Object(a["f"])("div",{key:2,class:"login-panel__button-login",onClick:t[2]||(t[2]=(...e)=>m.setLoginPopup&&m.setLoginPopup(...e))},"Войти"))])])}const h=e=>(Object(a["w"])("data-v-54491c8a"),e=e(),Object(a["u"])(),e),v=h(()=>Object(a["g"])("div",{class:"welcome-image__text"},"Создай свой маршрут",-1)),f={class:"places-container"},w={class:"menu__filters"},y=Object(a["i"])("Категория: "),P=Object(a["h"])('<option value="Все" selected data-v-54491c8a>Все</option><option value="Водопады" data-v-54491c8a>Водопады</option><option value="Озера" data-v-54491c8a>Озера</option><option value="Горы" data-v-54491c8a>Горы</option><option value="Заброшки" data-v-54491c8a>Заброшки</option>',5),_=[P],k={class:"gallery"};function I(e,t,s,i,c,o){const r=Object(a["A"])("PlacePreview");return Object(a["t"])(),Object(a["f"])("div",null,[v,Object(a["g"])("div",f,[Object(a["g"])("div",w,[Object(a["g"])("div",null,"Регион: "+Object(a["C"])(o.selectedRegion),1),Object(a["g"])("div",null,[y,Object(a["J"])(Object(a["g"])("select",{class:"places-filter",name:"filter","onUpdate:modelValue":t[0]||(t[0]=e=>c.Pfilter=e)},_,512),[[a["F"],c.Pfilter]])])]),Object(a["g"])("div",k,[(Object(a["t"])(!0),Object(a["f"])(a["a"],null,Object(a["z"])(o.filteredPlaces,e=>(Object(a["t"])(),Object(a["d"])(r,{key:"place + "+e.id,routePoint:e,ShowText:!0},null,8,["routePoint"]))),128))])])])}const $={class:"gallery__item-container"},R=["src"],C={key:0,class:"item__name"};function D(e,t,s,i,c,o){const r=Object(a["A"])("router-link");return Object(a["t"])(),Object(a["d"])(r,{to:{name:"Description",params:{eng:s.routePoint.eng}},class:"gallery__item"},{default:Object(a["I"])(()=>[Object(a["g"])("div",$,[Object(a["g"])("img",{class:"item__image",src:e.$baseUrl+"/img/"+s.routePoint.picture+".jpeg",alt:"avt"},null,8,R),s.ShowText?(Object(a["t"])(),Object(a["f"])("div",C,Object(a["C"])(s.routePoint.name),1)):Object(a["e"])("",!0)])]),_:1},8,["to"])}var A={name:"PlacePreview",props:["routePoint","ShowText"]},T=(s("2b4b"),s("6b0d")),x=s.n(T);const U=x()(A,[["render",D],["__scopeId","data-v-027d956c"]]);var S=U,V={components:{PlacePreview:S},data(){return{Pfilter:"Все"}},computed:{filteredPlaces(){return"Все"===this.selectedRegion&&"Все"===this.Pfilter?this.places:"Все"===this.selectedRegion?this.places.filter(e=>e.tag===this.Pfilter):"Все"===this.Pfilter?this.places.filter(e=>e.region===this.selectedRegion):this.places.filter(e=>e.tag===this.Pfilter&&e.region===this.selectedRegion)},selectedRegion(){return this.$store.state.selectedRegion},places(){return this.$store.state.places}},created(){this.$store.dispatch("getPlaces")}};s("c7c1");const L=x()(V,[["render",I],["__scopeId","data-v-54491c8a"]]);var M=L;const G={class:"description-text"},z={class:"input-rewiew-text"},F={class:"raiting"},H=Object(a["i"])("Ваша оценка: "),B=["src","onClick"];function E(e,t,s,i,c,o){const r=Object(a["A"])("Gallery"),n=Object(a["A"])("SavePanel"),l=Object(a["A"])("MyButton"),u=Object(a["A"])("ReviewMessages");return o.currentPlace?(Object(a["t"])(),Object(a["f"])("div",{key:0,class:Object(a["p"])(["description-page",{"description-page-mobile":!o.isDesktop}])},[Object(a["j"])(r),Object(a["j"])(n),Object(a["g"])("p",G,Object(a["C"])(o.currentPlace.description),1),Object(a["g"])("div",{class:Object(a["p"])(["input-rewiew",{"input-rewiew-mobile":!o.isDesktop}])},[Object(a["g"])("div",z,[Object(a["J"])(Object(a["g"])("textarea",{class:"input-rewiew__input",type:"text",placeholder:"Ваш отзыв","onUpdate:modelValue":t[0]||(t[0]=e=>c.inputValue=e),onKeydown:t[1]||(t[1]=Object(a["K"])(Object(a["L"])((...e)=>o.saveRewiew&&o.saveRewiew(...e),["ctrl"]),["enter"]))},null,544),[[a["G"],c.inputValue]]),Object(a["g"])("div",F,[H,(Object(a["t"])(),Object(a["f"])(a["a"],null,Object(a["z"])(5,t=>Object(a["g"])("img",{key:"star"+t,src:e.$baseUrl+"/icons/star.svg",alt:"star",class:Object(a["p"])(["icon-star",{"icon-star--hovered":t<=c.starHovered}]),onClick:e=>o.onStarHover(t)},null,10,B)),64))])]),Object(a["j"])(l,{title:"Отправить отзыв",noLeftRadius:o.isDesktop,isDisabled:!this.inputValue||!this.starHovered,onClick:o.saveRewiew},null,8,["noLeftRadius","isDisabled","onClick"])],2),Object(a["j"])(u)],2)):Object(a["e"])("",!0)}const J=["disabled"],N=["src"];function K(e,t,s,i,c,o){return Object(a["t"])(),Object(a["f"])("button",{class:Object(a["p"])(["button",{"button-disabled":s.isDisabled,"button-no-left-radius":s.noLeftRadius,"button-red":s.isRed}]),disabled:s.isDisabled},[Object(a["g"])("div",{class:Object(a["p"])(["button__content",{"button__content-vertical":s.vertical}])},[s.icon?(Object(a["t"])(),Object(a["f"])("img",{key:0,src:`${e.$baseUrl}/icons/${s.icon}`,alt:"icon"},null,8,N)):Object(a["e"])("",!0),Object(a["i"])(Object(a["C"])(s.title),1)],2)],10,J)}var W={name:"MyButton",props:["title","icon","isDisabled","noLeftRadius","isRed","vertical"]};s("0b45");const q=x()(W,[["render",K],["__scopeId","data-v-26ff9fb0"]]);var Q=q;const X={class:"rewiew-messages"},Y=["src"],Z=["onClick"];function ee(e,t,s,i,c,o){const r=Object(a["A"])("Avatar");return Object(a["t"])(),Object(a["f"])("div",null,[Object(a["g"])("h2",null,Object(a["C"])(o.titleText),1),Object(a["g"])("div",X,[(Object(a["t"])(!0),Object(a["f"])(a["a"],null,Object(a["z"])(o.currentReviews,t=>(Object(a["t"])(),Object(a["f"])("div",{class:"rewiew-message",key:t},[Object(a["j"])(r,{userName:t.name,userImg:e.$baseUrl+"/avatars/"+t.avatar},null,8,["userName","userImg"]),Object(a["g"])("div",{class:Object(a["p"])(["review-date",{"review-date-horizontal":s.horizontal}])},[Object(a["i"])(Object(a["C"])(t.createdAt)+" ",1),Object(a["g"])("div",null,[(Object(a["t"])(!0),Object(a["f"])(a["a"],null,Object(a["z"])(t.raiting,t=>(Object(a["t"])(),Object(a["f"])("img",{key:"star"+t,src:e.$baseUrl+"/icons/star.svg",alt:"star",class:"icon-star"},null,8,Y))),128))])],2),Object(a["g"])("div",{class:Object(a["p"])(["rewiew-text",{"rewiew-text-horizontal":!o.isDesktop}])},Object(a["C"])(t.text),3),o.isAdmin?(Object(a["t"])(),Object(a["f"])("div",{key:0,class:"gallery-window__button-close",onClick:e=>o.deleteReview(t.id)},null,8,Z)):Object(a["e"])("",!0)]))),128))])])}const te=["src"],se={key:0,class:"avatar__name"};function ae(e,t,s,i,c,o){return s.userImg?(Object(a["t"])(),Object(a["f"])("div",{key:0,class:Object(a["p"])({avatar:!s.hideName,"avatar-vertical":s.vertical})},[Object(a["g"])("img",{class:Object(a["p"])(["avatar__image",{"avatar__image-big":s.big}]),src:s.userImg,alt:"avt"},null,10,te),s.hideName?Object(a["e"])("",!0):(Object(a["t"])(),Object(a["f"])("div",se,Object(a["C"])(s.userName),1))],2)):Object(a["e"])("",!0)}var ie={name:"Avatar",props:["userName","userImg","hideName","vertical","big"]};s("c33f");const ce=x()(ie,[["render",ae],["__scopeId","data-v-0575b5b0"]]);var oe=ce;const re=(e,t)=>{e=Math.abs(e)%100;var s=e%10;return e>10&&e<20?e+" "+t[2]:s>1&&s<5?e+" "+t[1]:1==s?e+" "+t[0]:e+" "+t[2]};var ne={name:"ReviewMessages",props:["horizontal"],components:{Avatar:oe},computed:{currentPlace(){return this.$store.state.place},currentReviews(){return this.$store.state.reviews},isAdmin(){return"Admin"===this.$store.state.user.name},isDesktop(){return this.$store.state.isDesktop},titleText(){return 0===this.currentReviews.length?"Оставьте первый отзыв":re(this.currentReviews.length,["отзыв","отзыва","отзывов"])}},methods:{deleteReview(e){this.$store.dispatch("deleteReview",e)}}};s("7645");const le=x()(ne,[["render",ee],["__scopeId","data-v-38e6496c"]]);var ue=le;const de=e=>(Object(a["w"])("data-v-4060e4b2"),e=e(),Object(a["u"])(),e),pe=de(()=>Object(a["g"])("div",null,"Регион",-1)),be=de(()=>Object(a["g"])("div",null,"Город",-1)),je=de(()=>Object(a["g"])("div",null,"Категория",-1)),ge=de(()=>Object(a["g"])("div",null,"Доступен",-1)),Oe=de(()=>Object(a["g"])("div",null,"Сложность",-1)),me=de(()=>Object(a["g"])("div",null,"Время",-1)),he=de(()=>Object(a["g"])("div",null,"Рейтинг",-1)),ve={key:0,class:"raiting"},fe=["src"],we={key:1};function ye(e,t,s,i,c,o){const r=Object(a["A"])("AddInRouteButton"),n=Object(a["A"])("ButtonHeart"),l=Object(a["A"])("ShareButton");return Object(a["t"])(),Object(a["f"])("div",{class:Object(a["p"])(["save-panel__info",{"save-panel__info-mobile":!o.isDesktop}])},[pe,Object(a["i"])(" "+Object(a["C"])(o.currentPlace.region)+" ",1),be,Object(a["i"])(" "+Object(a["C"])(o.currentPlace.city)+" ",1),je,Object(a["i"])(" "+Object(a["C"])(o.currentPlace.tag)+" ",1),ge,Object(a["i"])(" "+Object(a["C"])(o.currentPlace.availability)+" ",1),Oe,Object(a["g"])("div",null,Object(a["C"])(o.currentDifficulty),1),me,Object(a["i"])(" "+Object(a["C"])(o.currentTime)+" ",1),he,o.currentPlace.raiting?(Object(a["t"])(),Object(a["f"])("div",ve,[(Object(a["t"])(!0),Object(a["f"])(a["a"],null,Object(a["z"])(o.currentPlace.raiting,t=>(Object(a["t"])(),Object(a["f"])("img",{key:"star"+t,src:e.$baseUrl+"/icons/star.svg",alt:"star",class:"raiting__star"},null,8,fe))),128))])):(Object(a["t"])(),Object(a["f"])("div",we,"Не определен")),Object(a["g"])("div",{class:Object(a["p"])(["save-panel__buttons",{"save-panel__buttons-mobile":!o.isDesktop}])},[Object(a["j"])(r,{placeId:o.currentPlace.id},null,8,["placeId"]),Object(a["j"])(n,{placeId:o.currentPlace.id},null,8,["placeId"]),Object(a["j"])(l)],2)],2)}function Pe(e,t,s,i,c,o){const r=Object(a["A"])("MyButton");return Object(a["t"])(),Object(a["d"])(r,{title:o.buttonTitle,isRed:o.isAddedInRoute,icon:"geo-alt.svg",onClick:o.addInMyRoute},null,8,["title","isRed","icon","onClick"])}var _e={name:"AddInRouteButton",props:["placeId"],components:{MyButton:Q},computed:{isAddedInRoute(){return!!this.$store.state.myRoute.find(e=>e.id===this.placeId)},buttonTitle(){return this.isAddedInRoute?"Убрать из маршрута":"Добавить в маршрут"}},methods:{addInMyRoute(){this.$store.dispatch("newPointInRoute",this.placeId)}}};const ke=x()(_e,[["render",Pe]]);var Ie=ke;const $e=e=>(Object(a["w"])("data-v-7badd01c"),e=e(),Object(a["u"])(),e),Re=$e(()=>Object(a["g"])("path",{"fill-rule":"evenodd",d:"M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"},null,-1)),Ce=[Re];function De(e,t,s,i,c,o){return Object(a["t"])(),Object(a["f"])("svg",{xmlns:"http://www.w3.org/2000/svg",class:Object(a["p"])(["heart",{"heart-red":o.isFavorite}]),viewBox:"-1 -1 18 18",onClick:t[0]||(t[0]=(...e)=>o.addInMyFavorites&&o.addInMyFavorites(...e))},Ce,2)}var Ae={props:["placeId"],computed:{isFavorite(){return!!this.$store.state.myFavorites.find(e=>e.id===this.placeId)}},methods:{addInMyFavorites(){this.$store.dispatch("newFavorite",this.placeId)}}};s("3005");const Te=x()(Ae,[["render",De],["__scopeId","data-v-7badd01c"]]);var xe=Te;const Ue={class:"share-button"},Se=["src"],Ve=["href"],Le=["src","alt"];function Me(e,t,s,i,c,o){return Object(a["t"])(),Object(a["f"])("div",Ue,[Object(a["g"])("img",{src:e.$baseUrl+"/icons/share.svg",alt:"share",class:"share-button__icon",onClick:t[0]||(t[0]=e=>o.setShowShareLinks())},null,8,Se),c.showShareLinks?(Object(a["t"])(),Object(a["f"])("div",{key:0,class:Object(a["p"])(["share-button__links",{"share-button__links-mobile":!o.isDesktop}])},[(Object(a["t"])(!0),Object(a["f"])(a["a"],null,Object(a["z"])(c.socials,e=>(Object(a["t"])(),Object(a["f"])("a",{key:e.alt,href:e.shareref+this.$route.path,target:"_blank"},[Object(a["g"])("img",{src:e.icon,alt:e.alt,class:"links__item"},null,8,Le)],8,Ve))),128))],2)):Object(a["e"])("",!0)])}const Ge="https://marshrutka.su/api",ze=[{ref:"https://vk.com",shareref:"http://vkontakte.ru/share.php?url=https://marshrutka.su",icon:Ge+"/icons/vk.png",alt:"vk"},{ref:"https://www.instagram.com",shareref:"https://telegram.me/share/url?url=https://marshrutka.su",icon:Ge+"/icons/instagram.png",alt:"instagram"},{ref:"https://tlgg.ru/likhachev_maxim",shareref:"https://telegram.me/share/url?url=https://marshrutka.su",icon:Ge+"/icons/telegram.png",alt:"telegram"},{ref:"https://wa.me/+79014534841",shareref:"whatsapp://send?text=http://marshrutka.su",icon:Ge+"/icons/whatsapp.png",alt:"whatsapp"}];var Fe={data(){return{socials:ze,showShareLinks:!1}},computed:{isDesktop(){return this.$store.state.isDesktop}},methods:{setShowShareLinks(){this.showShareLinks=!this.showShareLinks}}};s("4ece");const He=x()(Fe,[["render",Me],["__scopeId","data-v-4013406e"]]);var Be=He,Ee={name:"SavePanel",components:{AddInRouteButton:Ie,ButtonHeart:xe,ShareButton:Be},computed:{currentPlace(){return this.$store.state.place},currentDifficulty(){switch(this.$store.state.place.difficulty){case"1":return"Легкая";case"2":return"Средняя";case"3":return"Сложная";default:return"Не определена"}},currentTime(){return this.$store.state.place.time<1?re(60*this.$store.state.place.time,["минута","минуты","минут"]):this.$store.state.place.time>=24?re(this.$store.state.place.time/24,["день","дня","дней"]):re(this.$store.state.place.time,["час","часа","часов"])},isDesktop(){return this.$store.state.isDesktop}}};s("e71a");const Je=x()(Ee,[["render",ye],["__scopeId","data-v-4060e4b2"]]);var Ne=Je;const Ke=e=>(Object(a["w"])("data-v-2445fba3"),e=e(),Object(a["u"])(),e),We={key:0},qe=["src","onClick"],Qe=["src"],Xe={class:"gallery-container__item-last-text"},Ye=Ke(()=>Object(a["g"])("div",{class:"slider-btn-icon slider-btn-icon-left"},null,-1)),Ze=[Ye],et=["src"],tt=Ke(()=>Object(a["g"])("div",{class:"slider-btn-icon slider-btn-icon-right"},null,-1)),st=[tt];function at(e,t,s,i,c,o){return o.currentPictures.length?(Object(a["t"])(),Object(a["f"])("div",We,[Object(a["g"])("div",{class:Object(a["p"])(["gallery-container",{"gallery-container-vertical":!o.isDesktop}])},[(Object(a["t"])(),Object(a["f"])(a["a"],null,Object(a["z"])(3,(t,s)=>Object(a["g"])("img",{key:s,src:`${e.$baseUrl}/img/${this.currentPictures[s]}`,class:"gallery-container__item",onClick:e=>o.openGalleryPopup(s)},null,8,qe)),64)),Object(a["g"])("div",{class:"gallery-container__item",onClick:t[0]||(t[0]=e=>o.openGalleryPopup(3))},[Object(a["g"])("img",{src:`${e.$baseUrl}/img/${this.currentPictures[3]}`,class:"gallery-container__item gallery-container__item-last-image"},null,8,Qe),Object(a["g"])("div",Xe,Object(a["C"])(o.picturesCount),1)])],2),o.showGallery?(Object(a["t"])(),Object(a["f"])("div",{key:0,class:"background",onClick:t[7]||(t[7]=Object(a["L"])((...e)=>o.closeGalleryPopup&&o.closeGalleryPopup(...e),["self"]))},[Object(a["g"])("div",{class:Object(a["p"])(["gallery-window",{"gallery-window-mobile":!o.isDesktop}]),tabindex:"-1",onKeyup:[t[4]||(t[4]=Object(a["K"])(Object(a["L"])(e=>o.switchGallaryPicture(1),["stop"]),["right"])),t[5]||(t[5]=Object(a["K"])(Object(a["L"])(e=>o.switchGallaryPicture(-1),["stop"]),["left"])),t[6]||(t[6]=Object(a["K"])(Object(a["L"])((...e)=>o.closeGalleryPopup&&o.closeGalleryPopup(...e),["stop"]),["esc"]))],ref:"gallary"},[Object(a["g"])("div",{class:"gallery-window__button-close",onClick:t[1]||(t[1]=(...e)=>o.closeGalleryPopup&&o.closeGalleryPopup(...e))}),Object(a["g"])("div",{class:"gallery-window__slider slider-left",onClick:t[2]||(t[2]=e=>o.switchGallaryPicture(-1))},Ze),Object(a["g"])("img",{class:"gallery-window__image",src:e.$baseUrl+o.imageSrc},null,8,et),Object(a["g"])("div",{class:"gallery-window__slider slider-right",onClick:t[3]||(t[3]=e=>o.switchGallaryPicture(1))},st)],34)])):Object(a["e"])("",!0)])):Object(a["e"])("",!0)}var it=s("5c40"),ct={name:"Gallery",data(){return{currentPicture:0}},computed:{showGallery(){return this.$store.state.showGalleryPopup},currentPictures(){return this.$store.state.pictures},imageSrc(){return"/img/"+this.currentPictures[this.currentPicture]},picturesCount(){return"+"+(this.currentPictures.length-4)},isDesktop(){return this.$store.state.isDesktop}},methods:{closeGalleryPopup(){this.$store.commit("setGalleryPopup")},switchGallaryPicture(e){this.currentPicture=this.currentPicture+e,this.currentPicture>=this.currentPictures.length&&(this.currentPicture=0),this.currentPicture<0&&(this.currentPicture=this.currentPictures.length-1)},openGalleryPopup(e){this.currentPicture=e,this.$store.commit("setGalleryPopup"),Object(it["v"])(()=>{this.$refs.gallary.focus()})}}};s("d13d");const ot=x()(ct,[["render",at],["__scopeId","data-v-2445fba3"]]);var rt=ot,nt={components:{MyButton:Q,Gallery:rt,SavePanel:Ne,ReviewMessages:ue},data(){return{inputValue:"",starHovered:""}},computed:{currentRoute(){return Ss.currentRoute.value.params.eng},currentPlace(){return this.$store.state.place},currentReviews(){return this.$store.state.reviews},currentPictures(){return this.$store.state.pictures},isAdmin(){return"Admin"===this.$store.state.user.name},isDesktop(){return this.$store.state.isDesktop}},methods:{onStarHover(e){this.starHovered=e},saveRewiew(){this.$store.dispatch("newReview",{text:this.inputValue,raiting:this.starHovered}),this.starHovered=this.inputValue=""}},created(){this.$store.dispatch("getPlace",this.currentRoute)}};s("9eca");const lt=x()(nt,[["render",E],["__scopeId","data-v-218350d9"]]);var ut=lt;const dt=e=>(Object(a["w"])("data-v-34bbead9"),e=e(),Object(a["u"])(),e),pt={class:"registration--window"},bt={class:"form"},jt=dt(()=>Object(a["g"])("h2",null,"Регистрация",-1)),gt={class:"registration--window__form form"},Ot={key:0,class:"input-text-wrong"},mt={class:"form__password"},ht=["type"],vt=["src"],ft={key:1,class:"input-text-wrong"},wt={class:"form__password"},yt=["type"],Pt=["src"],_t={key:2,class:"input-text-wrong"},kt=Object(a["i"])("Уже зарегистрированы? ");function It(e,t,s,i,c,o){const r=Object(a["A"])("MyButton");return Object(a["t"])(),Object(a["f"])("div",pt,[Object(a["g"])("div",bt,[jt,Object(a["g"])("div",gt,[Object(a["J"])(Object(a["g"])("input",{class:"form__input","onUpdate:modelValue":t[0]||(t[0]=t=>e.name=t),type:"text",placeholder:"Логин"},null,512),[[a["G"],e.name]]),Object(a["J"])(Object(a["g"])("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.email=t),class:"form__input",type:"email",placeholder:"E-mail",onInput:t[2]||(t[2]=(...e)=>o.clearEmailValidation&&o.clearEmailValidation(...e)),onBlur:t[3]||(t[3]=(...e)=>o.validateEmail&&o.validateEmail(...e))},null,544),[[a["G"],e.email]]),e.emailValidated&&!o.isValidEmail?(Object(a["t"])(),Object(a["f"])("div",Ot,"Введите корректный email ")):Object(a["e"])("",!0),Object(a["g"])("div",mt,[Object(a["J"])(Object(a["g"])("input",{class:"form__input","onUpdate:modelValue":t[4]||(t[4]=t=>e.password=t),onInput:t[5]||(t[5]=(...e)=>o.clearPasswordValidation&&o.clearPasswordValidation(...e)),onBlur:t[6]||(t[6]=(...e)=>o.validatePassword&&o.validatePassword(...e)),type:e.typePassword,placeholder:"Пароль"},null,40,ht),[[a["E"],e.password]]),Object(a["g"])("img",{class:"password-eye",src:`${e.$baseUrl}/icons/${e.eyeIconPassword}.png`,onClick:t[7]||(t[7]=(...e)=>o.togglePasswordVisibility&&o.togglePasswordVisibility(...e))},null,8,vt)]),e.passwordValidated&&!o.isValidPassword?(Object(a["t"])(),Object(a["f"])("div",ft," Пароль должен быть больше 6 символов и включать латниские буквы и цифры ")):Object(a["e"])("",!0),Object(a["g"])("div",wt,[Object(a["J"])(Object(a["g"])("input",{"onUpdate:modelValue":t[8]||(t[8]=t=>e.rePassword=t),class:"form__input",type:e.typePassword,placeholder:"Повторно введите пароль"},null,8,yt),[[a["E"],e.rePassword]]),Object(a["g"])("img",{class:"password-eye",onClick:t[9]||(t[9]=(...e)=>o.togglePasswordVisibility&&o.togglePasswordVisibility(...e)),src:`${e.$baseUrl}/icons/${e.eyeIconPassword}.png`},null,8,Pt)]),e.password!==e.rePassword&&e.rePassword.length>6?(Object(a["t"])(),Object(a["f"])("div",_t," Пароли не совпадают ")):Object(a["e"])("",!0),Object(a["j"])(r,{title:"Зарегистрироваться",isDisabled:!o.inputIsCorrect,onClick:o.registration},null,8,["isDisabled","onClick"]),Object(a["g"])("p",null,[kt,Object(a["g"])("a",{class:"registration--window__link",onClick:t[10]||(t[10]=(...e)=>o.setLoginPopup&&o.setLoginPopup(...e))},"Войти")])])])])}var $t={components:{MyButton:Q},data:()=>({name:"",email:"",password:"",rePassword:"",typePassword:"password",eyeIconPassword:"hide",emailValidationText:"Введите корректный email",emailValidated:!1,passwordValidated:!1}),computed:{isValidEmail(){return this.email.includes("@")&&this.email.includes(".")},isValidPassword(){const e=/[0-9]/,t=/[A-z]/;return this.password.length>6&&this.password.match(e)&&this.password.match(t)||this.password.length<1},inputIsCorrect(){return""!==this.password&&this.password===this.rePassword&&this.isValidEmail&&this.isValidPassword&&""!==this.name}},methods:{validatePassword(){return this.passwordValidated=!0,this.isValidPassword?"":this.passwordValidationText},validateEmail(){return this.emailValidated=!0,this.isValidEmail?"":this.emailValidationText},clearPasswordValidation(){this.passwordValidated=!1},clearEmailValidation(){this.emailValidated=!1},setLoginPopup(){this.$store.commit("setLoginPopup")},togglePasswordVisibility(){"text"===this.typePassword?(this.typePassword="password",this.eyeIconPassword="hide"):(this.typePassword="text",this.eyeIconPassword="show")},registration(){const e={name:this.name,email:this.email,password:this.password};this.$store.dispatch("registration",e)}}};s("2093");const Rt=x()($t,[["render",It],["__scopeId","data-v-34bbead9"]]);var Ct=Rt;const Dt={class:"map"};function At(e,t,s,i,c,o){const r=Object(a["A"])("ymap-marker"),n=Object(a["A"])("yandex-map"),l=Object(a["A"])("MyButton"),u=Object(a["A"])("RoutePoint");return Object(a["t"])(),Object(a["f"])("div",{class:Object(a["p"])(["page",{"page-mobile":!o.isDesktop}])},[Object(a["g"])("div",Dt,[Object(a["j"])(n,{coords:c.coords,zoom:"5",controls:c.controls,onMapWasInitialized:o.mapInitialized},{default:Object(a["I"])(()=>[Object(a["j"])(r,{coords:c.coords,"marker-id":"Старт","hint-content":""},null,8,["coords"])]),_:1},8,["coords","controls","onMapWasInitialized"])]),Object(a["j"])(l,{title:"Постороить маршрут",onClick:t[0]||(t[0]=e=>o.newRoute(o.routeCoords)),isDisabled:!o.myRoute.length},null,8,["isDisabled"]),(Object(a["t"])(!0),Object(a["f"])(a["a"],null,Object(a["z"])(o.myRoute,e=>(Object(a["t"])(),Object(a["d"])(u,{key:e.id,routePoint:e},null,8,["routePoint"]))),128))],2)}const Tt=["src"],xt={key:0,class:"route-point__info route-point__info-desktop"},Ut={class:"tag"},St={class:"tag"},Vt={class:"tag"},Lt={class:"route-point__container"},Mt={class:"route-point__description"},Gt={key:0,class:"route-point__info"},zt={class:"tag"},Ft={class:"tag"},Ht={class:"tag"},Bt={class:"route-point__buttons"};function Et(e,t,s,i,c,o){const r=Object(a["A"])("ButtonHeart"),n=Object(a["A"])("PlacePreview"),l=Object(a["A"])("AddInRouteButton");return Object(a["t"])(),Object(a["f"])("div",null,[Object(a["g"])("div",{class:Object(a["p"])(["route-point",{"route-point-full-size":c.isFullSize,"route-point-mobile":!o.isDesktop}]),onClick:t[1]||(t[1]=Object(a["L"])((...e)=>o.toggleSize&&o.toggleSize(...e),["self"]))},[Object(a["g"])("div",{class:Object(a["p"])(["route-point__name",{"route-point__name-mobile":!o.isDesktop}]),onClick:t[0]||(t[0]=(...e)=>o.toggleSize&&o.toggleSize(...e))},[Object(a["g"])("img",{src:e.$baseUrl+"/icons/arrow.png",alt:"star",class:Object(a["p"])(["route-point__arrow",{"route-point__arrow-down":c.isFullSize}])},null,10,Tt),Object(a["i"])(" "+Object(a["C"])(s.routePoint.name)+" ",1),o.isDesktop?Object(a["e"])("",!0):(Object(a["t"])(),Object(a["d"])(r,{key:0,placeId:s.routePoint.id},null,8,["placeId"]))],2),o.isDesktop?(Object(a["t"])(),Object(a["f"])("div",xt,[Object(a["g"])("div",Ut,Object(a["C"])(s.routePoint.region),1),Object(a["g"])("div",St,Object(a["C"])(s.routePoint.city),1),Object(a["g"])("div",Vt,Object(a["C"])(s.routePoint.tag),1),Object(a["j"])(r,{placeId:s.routePoint.id},null,8,["placeId"])])):Object(a["e"])("",!0),Object(a["j"])(n,{routePoint:s.routePoint},null,8,["routePoint"]),Object(a["g"])("div",Lt,[Object(a["g"])("div",Mt,Object(a["C"])(s.routePoint.description),1),o.isDesktop?Object(a["e"])("",!0):(Object(a["t"])(),Object(a["f"])("div",Gt,[Object(a["g"])("div",zt,Object(a["C"])(s.routePoint.region),1),Object(a["g"])("div",Ft,Object(a["C"])(s.routePoint.city),1),Object(a["g"])("div",Ht,Object(a["C"])(s.routePoint.tag),1)])),Object(a["g"])("div",Bt,[Object(a["j"])(l,{placeId:s.routePoint.id},null,8,["placeId"])])])],2)])}var Jt={components:{AddInRouteButton:Ie,PlacePreview:S,ButtonHeart:xe},props:["routePoint","FullSize","ButtonsReverse"],data(){return{isFullSize:this.FullSize}},computed:{isDesktop(){return this.$store.state.isDesktop}},methods:{toggleSize(){this.isFullSize=!this.isFullSize}}};s("442e");const Nt=x()(Jt,[["render",Et],["__scopeId","data-v-e449f1a6"]]);var Kt=Nt,Wt=s("bc3a"),qt=s.n(Wt),Qt=(s("0804"),s("e30e")),Xt=s.n(Qt);const Yt={ERROR:"rgb(255, 98, 98)",SUCCCES:"rgb(0, 212, 141)",WARNING:"rgb(234, 206, 127)"},Zt=(e,t,s,a)=>{Xt()({text:t,duration:3e3,newWindow:!0,close:!1,gravity:s,position:a,stopOnFocus:!0,style:{background:e,"border-radius":"5px","font-family":"Roboto, Arial, sans- serif","font-weight":"300"},onClick:function(){}}).showToast()},es=e=>{e.interceptors.request.use(e=>{var t;const s=null===(t=JSON.parse(localStorage.getItem("userData")))||void 0===t?void 0:t.token;return s&&(e.headers["Authorization"]="Bearer "+s),e},e=>Promise.reject(e));let t=null;e.interceptors.response.use((function(e){return e}),async s=>{const a=s.config;if(401===s.response.status){if(t)await t;else{var i;t=e.post("refresh",{token:null===(i=JSON.parse(localStorage.getItem("userData")))||void 0===i?void 0:i.refreshToken});const s=await t;t=null,localStorage.setItem("userData",JSON.stringify({token:s.data.accessToken,refreshToken:s.data.refreshToken}))}return e(a)}403===s.response.status&&s.response.data&&Zt(Yt.ERROR,s.response.data.message,"bottom","right"),Zt(Yt.ERROR,s.response.data.message,"bottom","right")})},ts=qt.a.create({baseURL:"https://marshrutka.su/api",headers:{"Content-Type":"application/json"}});es(ts);let ss=null;var as={components:{RoutePoint:Kt,MyButton:Q},data(){return{coords:[54.82896654088406,39.8318938227539],controls:["default"]}},computed:{user(){return this.$store.state.user},myRoute(){return this.$store.state.myRoute},isDesktop(){return this.$store.state.isDesktop},routeCoords(){return this.$store.state.myRoute.map(e=>e.coords)}},methods:{async getMyOptimalRoute(){await this.$store.dispatch("getOptimalRoute")},async routeCreate(){try{await ts.get("optimalroute?id="+this.$store.state.user.id)}catch(e){console.log("Ошибка HTTP: "+e.response.data.message)}},async routeCreate1(){const e=this.routeCoords;for(let t=0;t<e.length;t++)for(let s=t+1;s<e.length;s++)await this.newRoute([e[t],e[s]])},async newRoute(e){const t=new window.ymaps.multiRouter.MultiRoute({referencePoints:e},{editorDrawOver:!1,wayPointDraggable:!1,viaPointDraggable:!1,routeStrokeColor:"000088",routeActiveStrokeColor:"ff0000",pinIconFillColor:"ff0000",boundsAutoApply:!0,zoomMargin:30});t.model.events.add("requestsuccess",(function(){})),ss.geoObjects.add(t)},async findMe(){const e=window.ymaps.geolocation.get();return e.then((function(e){return ss.geoObjects.add(e.geoObjects),e.geoObjects.position}))},async addInRouteMap(e,t,s,a){const i=await ts.post("routemap",{place1:e,place2:t,distance:s,duration:a}),c=await i.json();console.log(c.message)},mapInitialized(e){ss=e,console.log(ss)}}};s("bb66");const is=x()(as,[["render",At],["__scopeId","data-v-ba4c9656"]]);var cs=is;function os(e,t,s,i,c,o){const r=Object(a["A"])("RoutePoint");return Object(a["t"])(),Object(a["f"])("div",{class:Object(a["p"])(["page",{"page-mobile":!o.isDesktop}])},[Object(a["g"])("h2",null,Object(a["C"])(o.titleText),1),(Object(a["t"])(!0),Object(a["f"])(a["a"],null,Object(a["z"])(o.myFavorites,e=>(Object(a["t"])(),Object(a["d"])(r,{key:e,FullSize:!0,routePoint:e},null,8,["routePoint"]))),128))],2)}var rs={components:{RoutePoint:Kt},computed:{myFavorites(){return this.$store.state.myFavorites},titleText(){return this.myFavorites.length?"Избранное: "+this.myFavorites.length:"Пока здесь пусто"},isDesktop(){return this.$store.state.isDesktop}}};s("4f92");const ns=x()(rs,[["render",os],["__scopeId","data-v-00d29806"]]);var ls=ns;const us=e=>(Object(a["w"])("data-v-cb0c1574"),e=e(),Object(a["u"])(),e),ds={class:"form"},ps=us(()=>Object(a["g"])("h2",null,"Настройки",-1)),bs=us(()=>Object(a["g"])("label",{class:"form__button",for:"file"},"Изменить аватар",-1));function js(e,t,s,i,c,o){const r=Object(a["A"])("Avatar"),n=Object(a["A"])("MyButton");return Object(a["t"])(),Object(a["f"])("div",ds,[ps,o.user.avatar?(Object(a["t"])(),Object(a["d"])(r,{key:0,userName:o.user.name,userImg:e.$baseUrl+"/avatars/"+o.user.avatar,vertical:!0,big:!0},null,8,["userName","userImg"])):Object(a["e"])("",!0),Object(a["g"])("input",{class:"form__input-file",type:"file",id:"file",ref:"file",accept:"image/jpeg",onChange:t[0]||(t[0]=e=>o.replaceUserAvatar())},null,544),bs,Object(a["J"])(Object(a["g"])("input",{class:"form__input-text","onUpdate:modelValue":t[1]||(t[1]=t=>e.oldEmail=t),type:"email",placeholder:"Старый e-mail"},null,512),[[a["G"],e.oldEmail]]),Object(a["J"])(Object(a["g"])("input",{class:"form__input-text","onUpdate:modelValue":t[2]||(t[2]=t=>e.email=t),type:"email",placeholder:"Новый e-mail"},null,512),[[a["G"],e.email]]),Object(a["j"])(n,{title:"Изменить E-mail",isDisabled:!(e.oldEmail&&e.email),onClick:o.replaceUserEmail},null,8,["isDisabled","onClick"]),Object(a["J"])(Object(a["g"])("input",{class:"form__input-text","onUpdate:modelValue":t[3]||(t[3]=t=>e.oldPassword=t),type:"password",placeholder:"Старый пароль"},null,512),[[a["G"],e.oldPassword]]),Object(a["J"])(Object(a["g"])("input",{class:"form__input-text","onUpdate:modelValue":t[4]||(t[4]=t=>e.password=t),type:"password",placeholder:"Новый пароль"},null,512),[[a["G"],e.password]]),Object(a["j"])(n,{title:"Изменить пароль",isDisabled:!(e.oldPassword&&e.password),onClick:o.replaceUserPassword},null,8,["isDisabled","onClick"])])}var gs={components:{MyButton:Q,Avatar:oe},data:()=>({oldEmail:"",email:"",oldPassword:"",password:""}),methods:{replaceUserAvatar(){this.$store.dispatch("replaceUserAvatar",{name:this.user.name,image:this.$refs.file.files[0]})},replaceUserEmail(){this.$store.dispatch("replaceUserEmail",{name:this.user.name,oldEmail:this.oldEmail,email:this.email})},replaceUserPassword(){this.$store.dispatch("replaceUserPassword",{name:this.user.name,oldPassword:this.oldPassword,password:this.password})}},computed:{user(){return this.$store.state.user}}};s("b333");const Os=x()(gs,[["render",js],["__scopeId","data-v-cb0c1574"]]);var ms=Os;const hs=e=>(Object(a["w"])("data-v-6eaa95f8"),e=e(),Object(a["u"])(),e),vs={class:"form"},fs=hs(()=>Object(a["g"])("h2",null,"Изменить обьекты",-1)),ws=["value"],ys=Object(a["h"])('<datalist id="tags" data-v-6eaa95f8><option value="Все" selected data-v-6eaa95f8>Все</option><option value="Водопады" data-v-6eaa95f8>Водопады</option><option value="Озера" data-v-6eaa95f8>Озера</option><option value="Горы" data-v-6eaa95f8>Горы</option><option value="Заброшки" data-v-6eaa95f8>Заброшки</option></datalist>',1),Ps=hs(()=>Object(a["g"])("datalist",{id:"region"},[Object(a["g"])("option",{value:"Абхазия"},"Abkhazia"),Object(a["g"])("option",{value:"Сочи"},"Sochi"),Object(a["g"])("option",{value:"Красная Поляна"},"Krasnaia Polyana")],-1)),_s=hs(()=>Object(a["g"])("datalist",{id:"difficulty"},[Object(a["g"])("option",{value:"1"},"Легкий"),Object(a["g"])("option",{value:"2"},"Средний"),Object(a["g"])("option",{value:"3"},"Сложный")],-1)),ks={class:"gallery"},Is=["src","onClick"],$s={key:0,for:"file",class:"gallery-container__item"},Rs={class:"form__buttons"};function Cs(e,t,s,i,c,o){const r=Object(a["A"])("MyButton");return Object(a["t"])(),Object(a["f"])("div",vs,[fs,Object(a["J"])(Object(a["g"])("select",{class:"form__input",name:"places",id:"places","onUpdate:modelValue":t[0]||(t[0]=t=>e.place=t),onChange:t[1]||(t[1]=(...e)=>o.getPictures&&o.getPictures(...e))},[(Object(a["t"])(!0),Object(a["f"])(a["a"],null,Object(a["z"])(this.places,e=>(Object(a["t"])(),Object(a["f"])("option",{key:e.id,value:e},Object(a["C"])(e.name),9,ws))),128))],544),[[a["F"],e.place]]),Object(a["J"])(Object(a["g"])("input",{class:"form__input","onUpdate:modelValue":t[2]||(t[2]=t=>e.place.eng=t),type:"text",placeholder:"название объекта на английском"},null,512),[[a["G"],e.place.eng]]),Object(a["J"])(Object(a["g"])("input",{class:"form__input","onUpdate:modelValue":t[3]||(t[3]=t=>e.place.name=t),type:"text",placeholder:"название объекта на русском"},null,512),[[a["G"],e.place.name]]),Object(a["J"])(Object(a["g"])("input",{class:"form__input",type:"text",list:"tags",placeholder:"тип","onUpdate:modelValue":t[4]||(t[4]=t=>e.place.tag=t)},null,512),[[a["G"],e.place.tag]]),ys,Object(a["J"])(Object(a["g"])("input",{class:"form__input",type:"text",list:"region",placeholder:"регион","onUpdate:modelValue":t[5]||(t[5]=t=>e.place.region=t)},null,512),[[a["G"],e.place.region]]),Ps,Object(a["J"])(Object(a["g"])("input",{class:"form__input",type:"text",placeholder:"город","onUpdate:modelValue":t[6]||(t[6]=t=>e.place.city=t)},null,512),[[a["G"],e.place.city]]),Object(a["J"])(Object(a["g"])("input",{class:"form__input",type:"text",list:"difficulty",placeholder:"сложность","onUpdate:modelValue":t[7]||(t[7]=t=>e.place.difficulty=t)},null,512),[[a["G"],e.place.difficulty]]),_s,Object(a["J"])(Object(a["g"])("input",{class:"form__input",type:"text",placeholder:"доступность","onUpdate:modelValue":t[8]||(t[8]=t=>e.place.availability=t)},null,512),[[a["G"],e.place.availability]]),Object(a["J"])(Object(a["g"])("input",{class:"form__input",type:"text",placeholder:"время","onUpdate:modelValue":t[9]||(t[9]=t=>e.place.time=t)},null,512),[[a["G"],e.place.time]]),Object(a["J"])(Object(a["g"])("textarea",{class:"input-rewiew__input",type:"text",placeholder:"Описание","onUpdate:modelValue":t[10]||(t[10]=t=>e.place.description=t)},null,512),[[a["G"],e.place.description]]),Object(a["J"])(Object(a["g"])("input",{class:"form__input",type:"text",placeholder:"43.434954,40.442885","onUpdate:modelValue":t[11]||(t[11]=t=>e.place.coords=t)},null,512),[[a["G"],e.place.coords]]),Object(a["g"])("div",ks,[(Object(a["t"])(!0),Object(a["f"])(a["a"],null,Object(a["z"])(o.currentPictures,t=>(Object(a["t"])(),Object(a["f"])("img",{key:t,src:`${e.$baseUrl}/img/${t}`,class:"gallery-container__item",onClick:e=>o.deletePlaceImage(t)},null,8,Is))),128)),Object(a["g"])("input",{class:"new-picture",type:"file",id:"file",ref:"file",accept:"image/jpeg",onChange:t[12]||(t[12]=e=>o.addPlaceImage())},null,544),e.place.id?(Object(a["t"])(),Object(a["f"])("label",$s,"Добавить фото")):Object(a["e"])("",!0)]),Object(a["g"])("div",Rs,[e.place.id?(Object(a["t"])(),Object(a["d"])(r,{key:0,title:"Сохранить",onClick:o.editPlace},null,8,["onClick"])):Object(a["e"])("",!0),e.place.id?(Object(a["t"])(),Object(a["d"])(r,{key:1,title:"Удалить",isRed:"true",onClick:o.deletePlace},null,8,["onClick"])):(Object(a["t"])(),Object(a["d"])(r,{key:2,title:"Добавить",onClick:o.addNewPlace},null,8,["onClick"]))])])}var Ds={components:{MyButton:Q},data:()=>({place:{}}),computed:{places(){return this.$store.state.places},currentPictures(){return this.$store.state.pictures}},methods:{addNewPlace(){this.$store.dispatch("addNewPlace",this.place)},editPlace(){delete this.place.picture,this.$store.dispatch("editPlace",this.place)},deletePlace(){this.$store.dispatch("deletePlace",this.place.id)},getPictures(){this.$store.dispatch("getPictures",this.place.id)},addPlaceImage(){this.$store.dispatch("addPlaceImage",[this.place.id,this.$refs.file.files[0]]),this.$store.dispatch("getPictures",this.place.id)},deletePlaceImage(e){this.$store.dispatch("deletePlaceImage",e),this.$store.dispatch("getPictures",this.place.id)}},created(){this.$store.dispatch("getPlaces"),this.$store.state.pictures=[]}};s("c50b");const As=x()(Ds,[["render",Cs],["__scopeId","data-v-6eaa95f8"]]);var Ts=As,xs=s("6c02");const Us=[{path:"/",name:"MyPlaces",component:M},{path:"/:eng",name:"Description",component:ut},{path:"/registration",name:"Registration",component:Ct},{path:"/myroute",name:"MyRoute",component:cs},{path:"/myfavorites",name:"MyFavorites",component:ls},{path:"/settings",name:"Settings",component:ms},{path:"/admin",name:"Admin",component:Ts}],Ss=Object(xs["a"])({history:Object(xs["b"])(),routes:Us});Ss.beforeEach((e,t)=>{window.scroll(0,0),"MyPlaces"===e.name&&void 0!==t.name&&window.scroll(0,530)});var Vs={name:"Header",components:{MyButton:Q,Avatar:oe},data:()=>({selectedRegion:""}),computed:{user(){return this.$store.state.user},isLogIn(){return!!this.user.name},userInfo(){return{name:this.user.name?this.user.name:"Неопознанный турист",avatar:this.user.avatar?this.user.avatar:"tourist.png"}},isAdmin(){return"Admin"===this.user.name},isDesktop(){return this.$store.state.isDesktop},isStartPage(){return"/"===this.$route.fullPath}},methods:{setLoginPopup(){this.isLogIn?this.$store.dispatch("logOut"):this.$store.commit("setLoginPopup")},setSelectedRegion(){this.$store.commit("setselectedRegion",this.selectedRegion),window.scroll(0,530),"MyPlaces"!==Ss.currentRoute.name&&Ss.push({name:"MyPlaces"}),this.selectedRegion=""}}};s("a7e7");const Ls=x()(Vs,[["render",m],["__scopeId","data-v-38f0651e"]]);var Ms=Ls;const Gs={class:"footer"},zs={href:"mailto:macs0007@mail.ru",class:"contacts-typical__item"},Fs=["src"],Hs=Object(a["i"])(" macs0007@mail.ru "),Bs={href:"tel:+79014534841",class:"contacts-typical__item"},Es=["src"],Js=Object(a["i"])(" +79014534841 "),Ns={class:"footer__contacts-social"},Ks=["href"],Ws=["src","alt"],qs=Object(a["i"])("© 2022, Marshrutka Limited Sochifornia");function Qs(e,t,s,i,c,o){const r=Object(a["A"])("router-link");return Object(a["t"])(),Object(a["f"])("div",Gs,[Object(a["g"])("div",{class:Object(a["p"])(["footer__contacts-typical",{"footer__contacts-typical-mobile":!o.isDesktop}])},[Object(a["g"])("a",zs,[Object(a["g"])("img",{src:e.$baseUrl+"/icons/mail.svg",alt:"mail"},null,8,Fs),Hs]),Object(a["g"])("a",Bs,[Object(a["g"])("img",{src:e.$baseUrl+"/icons/phone.svg",alt:"phone"},null,8,Es),Js])],2),Object(a["g"])("div",Ns,[(Object(a["t"])(!0),Object(a["f"])(a["a"],null,Object(a["z"])(c.socials,e=>(Object(a["t"])(),Object(a["f"])("a",{key:e.alt,href:e.ref},[Object(a["g"])("img",{src:e.icon,alt:e.alt,class:"contacts-social__item"},null,8,Ws)],8,Ks))),128))]),Object(a["j"])(r,{to:"/",class:Object(a["p"])(["footer__logo-name",{"footer__logo-name-mobile":!o.isDesktop}])},{default:Object(a["I"])(()=>[qs]),_:1},8,["class"])])}var Xs={data(){return{socials:ze}},computed:{isDesktop(){return this.$store.state.isDesktop}}};s("3b3b");const Ys=x()(Xs,[["render",Qs],["__scopeId","data-v-105e1aec"]]);var Zs=Ys;const ea=e=>(Object(a["w"])("data-v-09341aee"),e=e(),Object(a["u"])(),e),ta=ea(()=>Object(a["g"])("h2",null,"Вход",-1)),sa={class:"form"},aa={class:"form__input-text",ref:"name",type:"text",placeholder:"Логин",tabindex:"-1"},ia={class:"form__input-text",ref:"password",type:"password",placeholder:"Пароль"},ca=Object(a["i"])("Впервые у нас? "),oa=Object(a["i"])("Зарегистрируйтесь");function ra(e,t,s,i,c,o){const r=Object(a["A"])("MyButton"),n=Object(a["A"])("router-link");return Object(a["t"])(),Object(a["f"])("div",{class:"background",onClick:t[3]||(t[3]=Object(a["L"])((...e)=>o.setLoginPopup&&o.setLoginPopup(...e),["self"]))},[Object(a["g"])("div",{class:Object(a["p"])(["login-window",{"login-window-mobile":!o.isDesktop}]),onKeyup:[t[1]||(t[1]=Object(a["K"])(Object(a["L"])((...e)=>o.setLoginPopup&&o.setLoginPopup(...e),["stop"]),["esc"])),t[2]||(t[2]=Object(a["K"])(Object(a["L"])((...e)=>o.login&&o.login(...e),["stop"]),["enter"]))]},[ta,Object(a["g"])("div",{class:"button-close",onClick:t[0]||(t[0]=(...e)=>o.setLoginPopup&&o.setLoginPopup(...e))}),Object(a["g"])("div",sa,[Object(a["g"])("input",aa,null,512),Object(a["g"])("input",ia,null,512),Object(a["j"])(r,{onClick:o.login,title:"Войти"},null,8,["onClick"]),Object(a["g"])("div",null,[ca,Object(a["j"])(n,{to:"/registration",onClick:o.setLoginPopup},{default:Object(a["I"])(()=>[oa]),_:1},8,["onClick"])])])],34)])}var na={name:"LoginPopup",components:{MyButton:Q},computed:{isDesktop(){return this.$store.state.isDesktop}},methods:{setLoginPopup(){this.$store.commit("setLoginPopup")},login(){const e={name:this.$refs.name.value,password:this.$refs.password.value};this.$store.dispatch("login",e)}},mounted(){this.$refs.name.focus()}};s("88d2");const la=x()(na,[["render",ra],["__scopeId","data-v-09341aee"]]);var ua=la;const da=()=>{const e=1e3;return window.innerWidth>=e};var pa={name:"App",components:{Header:Ms,Footer:Zs,LoginPopup:ua},mounted(){localStorage.getItem("userData")?this.$store.dispatch("getUser"):this.$store.dispatch("logOut"),this.$store.commit("setIsDesktop",da()),window.addEventListener("resize",()=>{this.$store.commit("setIsDesktop",da())})}};s("47e0");const ba=x()(pa,[["render",i]]);var ja=ba,ga=(s("13d5"),s("5502"));const Oa=Object(ga["a"])({state(){return{selectedRegion:"Все",showLoginPopup:!1,showGalleryPopup:!1,myRoute:[],myFavorites:[],places:[],place:{},reviews:[],pictures:[],user:{},isDesktop:!0}},actions:{logOut(){localStorage.removeItem("userData"),this.state.user={},this.state.myRoute=[],this.state.myFavorites=[],Ss.push({name:"MyPlaces"})},async getPlaces(){try{const e=await ts.get("places");this.commit("setPlaces",e.data)}catch(e){console.log("Ошибка HTTP: "+e)}},async getPlace({commit:e,dispatch:t},s){try{const a=await ts.get("place?id="+s);t("getPictures",a.data.id),t("getReviews",a.data.id),e("setPlace",a.data)}catch(a){console.log("Ошибка HTTP: "+a)}},async getReviews({commit:e},t){try{const s=await ts.get("review",{params:{id:t}});e("setReviews",s.data)}catch(s){console.log("Ошибка HTTP: "+s)}},async getPictures(e,t){try{const e=await ts.get("pictures",{params:{id:t}});this.commit("setPictures",e.data)}catch(s){console.log("Ошибка HTTP: "+s)}},async getFavorites(){try{const e=await ts.get("favorite",{params:{id:this.state.user.id}});this.commit("setmyFavorites",e.data)}catch(e){console.log("Ошибка HTTP: "+e)}},async getRoute(){try{const e=await ts.get("route",{params:{id:this.state.user.id}});this.commit("setmyRoute",e.data)}catch(e){console.log("Ошибка HTTP: "+e)}},async getUser(){try{const e=await ts.get("user");this.commit("setUser",e.data.user),this.dispatch("getFavorites"),this.dispatch("getRoute")}catch(e){console.log("Ошибка HTTP: "+e)}},async newReview(e,t){try{await ts.post("review",{text:t.text,raiting:t.raiting,userId:this.state.user.id,placeId:this.state.place.id}),this.dispatch("getReviews",this.state.place.id)}catch(s){console.log("Ошибка HTTP: "+s)}},async deleteReview(e,t){try{await ts.delete("review",{params:{id:t}}),this.dispatch("getReviews",this.state.place.id)}catch(s){console.log("Ошибка HTTP: "+s)}},async newFavorite(e,t){try{const e=await ts.post("favorite",{userId:this.state.user.id,placeId:t});e&&await this.dispatch("getFavorites")}catch(s){console.log("Ошибка HTTP: "+s)}},async newPointInRoute(e,t){try{const e=await ts.post("route",{userId:this.state.user.id,placeId:t});e&&await this.dispatch("getRoute")}catch(s){console.log("Ошибка HTTP: "+s)}},async login({commit:e},t){try{const s=await ts.post("login",{name:t.name,password:t.password});localStorage.setItem("userData",JSON.stringify({token:s.data.token,refreshToken:s.data.refreshToken})),e("setUser",s.data.user),this.dispatch("getFavorites"),this.dispatch("getRoute"),e("setLoginPopup")}catch(s){console.log("Ошибка HTTP: "+s)}},async registration(e,t){try{const e=await ts.post("registration",{name:t.name,password:t.password,email:t.email});localStorage.setItem("userData",JSON.stringify({token:e.data.token,refreshToken:e.data.refreshToken})),this.commit("setUser",e.data.user),Ss.push({name:"MyPlaces"})}catch(s){console.log("Ошибка HTTP: "+s)}},async addNewPlace(e,t){try{await ts.post("place",{place:t})}catch(s){console.log("Ошибка HTTP: "+s)}},async editPlace(e,t){try{await ts.patch("place",{place:t})}catch(s){console.log("Ошибка HTTP: "+s)}},async deletePlace(e,t){try{await ts.delete("place",{params:{id:t}})}catch(s){console.log("Ошибка HTTP: "+s)}},async addPlaceImage(e,t){const s=new FormData;s.append("id",t[0]),s.append("image",t[1]);try{await ts.post("pictures",s)}catch(a){console.log("Ошибка HTTP: "+a)}},async deletePlaceImage(e,t){try{await ts.delete("pictures",{params:{image:t}})}catch(s){console.log("Ошибка HTTP: "+s)}},async replaceUserAvatar(e,t){const s=new FormData;s.append("name",t.name),s.append("image",t.image);try{await ts.post("settings",s)}catch(a){console.log("Ошибка HTTP: "+a)}},async replaceUserEmail(e,t){try{await ts.post("settings",{name:t.name,oldEmail:t.oldEmail,email:t.email})}catch(s){console.log("Ошибка HTTP: "+s)}},async replaceUserPassword(e,t){try{await ts.post("settings",{name:t.name,oldPassword:t.oldPassword,password:t.password})}catch(s){console.log("Ошибка HTTP: "+s)}}},mutations:{setselectedRegion(e,t){e.selectedRegion=t},setLoginPopup(e){e.showLoginPopup=!e.showLoginPopup},setGalleryPopup(e){e.showGalleryPopup=!e.showGalleryPopup},setCurrentPicture(e,t){e.currentPicture=t},setmyRoute(e,t){e.myRoute=t},setMyOptimalRoute(e,t){e.myOptimalRoute=t},setmyFavorites(e,t){e.myFavorites=t},setPlaces(e,t){e.places=t},setPlace(e,t){e.place=t},setUser(e,t){e.user=t},setReviews(e,t){e.reviews=t,e.place.raiting=Math.round(t.reduce((e,t)=>e+t.raiting,0)/t.length)},setPictures(e,t){e.pictures=t},setIsDesktop(e,t){e.isDesktop=t}}});var ma=s("f5ce");const ha={apiKey:"378194c2-3ccf-497c-8950-da741a79edd2",lang:"ru_RU",coordorder:"latlong",enterprise:!1,version:"2.1"},va=Object(a["c"])(ja).use(Ss).use(Oa).use(ma["a"],ha);va.config.globalProperties.$baseUrl="https://marshrutka.su/api",va.mount("#app")},"597b":function(e,t,s){},"62a8":function(e,t,s){},"696b":function(e,t,s){},7645:function(e,t,s){"use strict";s("597b")},"77da":function(e,t,s){},"88d2":function(e,t,s){"use strict";s("d66f")},"8d7e":function(e,t,s){},"9eca":function(e,t,s){"use strict";s("df92")},a7e7:function(e,t,s){"use strict";s("202a")},ab2b:function(e,t,s){},b333:function(e,t,s){"use strict";s("2a62")},b9b0:function(e,t,s){},bb66:function(e,t,s){"use strict";s("c88a")},c33f:function(e,t,s){"use strict";s("62a8")},c50b:function(e,t,s){"use strict";s("e791")},c7c1:function(e,t,s){"use strict";s("8d7e")},c88a:function(e,t,s){},cad8:function(e,t,s){},ce82:function(e,t,s){},d018:function(e,t,s){},d13d:function(e,t,s){"use strict";s("ab2b")},d66f:function(e,t,s){},df92:function(e,t,s){},e6b5:function(e,t,s){},e71a:function(e,t,s){"use strict";s("77da")},e791:function(e,t,s){}});
//# sourceMappingURL=app.44a985f0.js.map